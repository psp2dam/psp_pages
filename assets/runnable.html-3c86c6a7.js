import{_ as A,r as o,o as y,c as u,d as n,a as s,w as e,b as a,f as p}from"./app-bb5aee2c.js";const m="/psp_pages/assets/Single_vs_MultiThreaded_Approaches-3d0beeb7.jpg",D="/psp_pages/assets/threads_process_end-c389d466.png",E={},B=s("h1",{id:"_3-1-clases-java-para-la-gestion-de-hilos",tabindex:"-1"},"3.1. Clases Java para la gestión de hilos",-1),v={class:"table-of-contents"},b=s("h2",{id:"_3-1-1-el-interfaz-runnable",tabindex:"-1"},"3.1.1. El interfaz Runnable",-1),h=s("p",null,"Un hilo (thread en adelante) puede ejecutar código Java dentro de tu aplicación Java.",-1),g=s("p",null,[s("img",{src:m,alt:"alt_text"})],-1),q=s("p",null,"Cuando un programa Java se lanza (se convierte en un proceso) empieza a ejecutarse por su método main() que lo ejecuta el thread principal (main), un hilo especial creado por la Java VM para ejecutar la aplicación. Desde un proceso se pueden crear e iniciar tantos threads como necesites. Estos hilos ejecutarán partes del código de la aplicación en paralelo con el thread principal",-1),f=s("p",null,"Los thread en Java son objetos como cualquier otro. Un thread es una instancia de la clase java.lang.Thread, o instancias de clases que heredan de ésta. Como ya hemos icho, además de ser objetos, los threads tienen la capacidad de ejecutar código.",-1),j=s("p",null,[a("La forma más usada para indicar a un thread qué código queremos que ejecute es creando una clase que implemente la interfaz "),s("code",null,"java.lang.Runnable"),a(".")],-1),C=s("p",null,"Esta interfaz es una interfaz estándar que viene con la plataforma Java. La interfaz Runnable sólo tiene un único método, void run().",-1),T={href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html",target:"_blank",rel:"noopener noreferrer"},x=p(`<p>Sea lo que sea lo que el thread tenga que hacer, debe estar incluido en la implementación del método run. Tenemos tres posibilidades de implementar dicha interfaz:</p><ul><li>Crear una clase Java que implemente la interfaz Runnable.</li><li>Crear una clase anónima que implemente la interfaz Runnable.</li><li>Crear una expresión Lambda que implemente la interfaz Runnable.</li></ul><p>En las siguientes secciones podemos ver cómo usar cada una de ellas.</p><h3 id="clase-java-que-implementa-la-interfaz-runnable" tabindex="-1">Clase Java que implementa la interfaz Runnable</h3><p>La primera forma que vamos a ver es creando una clase que implementa la interfaz. Podemos ver un ejemplo básico en el siguiente código:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">MyRunnable</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">implements</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Runnable</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">      System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">MyRunnable running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Todo lo que hace la implementación es imprimir el texto &quot;MyRunnable running&quot;. Tras ejecutar esa línea de código, el método run termina y el thread que estuviese ejecutándolo se pararía.</p><h3 id="implementacion-con-clase-anonima-de-la-interfaz-runnable" tabindex="-1">Implementación con clase anónima de la interfaz Runnable</h3><p>Otra forma de obtener un objeto que implemente Runnable es crear una clase anónima. A continuación tenemos un ejemplo de cómo hacerlo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">Runnable</span><span style="color:#90A4AE;"> myRunnable </span><span style="color:#39ADB5;">=</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Runnable</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Runnable running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Salvo por el hecho de usar una clase anónima, el ejemplo hace exactamente lo mismo que el anterior en el que se creaba una clase que implementaba la interfaz.</p><h3 id="implementacion-de-runnable-a-traves-de-una-expresion-lambda" tabindex="-1">Implementación de Runnable a través de una expresión Lambda</h3><p>Para la tercera forma nos vamos a basar en la característica de la interfaz Runnable, esto es, que sólo tiene un único método a implementar, el método run. Aunque Runnable no es una interfaz funcional, podemos crear una expresión Lambda que no dará lugar a confusión acerca del método que se quiere ejecutar. Por este motivo podemos usar la expresión lambda como si Runnable fuese una interfaz funcional.</p><p>Vamos a verlo con un ejemplo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">Runnable</span><span style="color:#90A4AE;"> runnable </span><span style="color:#39ADB5;">=</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">-&gt;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Lambda Runnable running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="llamar-al-metodo-run-de-una-clase-que-implemente-runnable" tabindex="-1">Llamar al método run de una clase que implemente Runnable</h3><p>Vamos a fijarnos en este ejemplo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">LiftOff</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">implements</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Runnable</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> countDown </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">10</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> taskCount </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">final</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> id </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> taskCount</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">LiftOff</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">LiftOff</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">countDown</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">this.</span><span style="color:#90A4AE;">countDown </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> countDown</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">@</span><span style="color:#9C3EDA;">Override</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">countDown </span><span style="color:#39ADB5;">&gt;</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">#</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> id </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> countDown </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">)</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            countDown</span><span style="color:#39ADB5;">--;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Lanzamiento (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> id </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">)</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">LiftOff</span><span style="color:#90A4AE;"> launch </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">LiftOff</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        launch</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Comienza la cuenta atrás!</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Copia el código anterior y ejecútalo en tu IDE. ¿Qué ves en la salida?</p><div class="custom-container question"><p class="custom-container-title">¿Qué está pasando con la ejecución del programa anterior?</p><p>Tras ejecutarlo, ¿el mensaje &quot;Comienza la cuenta atrás!&quot; está puesto en el sitio correcto?</p><p>intenta crear más instancias del la clase LiftOff y haz que se ejecuten todas (dentro del main)</p><p>Si observas la salida de aplicación, ¿está haciendo algo diferente a una aplicación monohilo? ¿Qué puedes extraer de la salida del programa?</p></div><details class="custom-container details"><summary>Respuesta a las cuestiones planteadas</summary><p>El mensaje debería mostrarse antes que la cuenta atrás. De hecho la instrucción con el System.out está después de la llamada al método run.</p><p>Como se puede observar, no estamos haciendo nada diferente. El código de run se está ejecutando uno después de otro.</p><p>En realidad, <strong>no estamos creando nuevos threads</strong>, lo único que hemos hecho hasta ahora es implementar una interfaz, pero llamando al método run estamos haciendo que el hilo principal de la aplicación, el único hilo de momento, esté ejecutando un método run, después otro, después otro, ... y cuando ha acabado con todos hace el System.out.</p></details><h2 id="_3-1-2-thread-subclass" tabindex="-1">3.1.2 Thread subclass</h2><p>Además de implementando la interfaz Runnable, la segunda forma que tenemos de indicar a un thread el código a ejecutar es creando una subclase de <code>java.lang.Thread</code> y sobrescribiendo el método run(). La clase Thread implementa de forma implícita la interfaz Runnable. Al igual que con Runnable, el método run() contiene el código que ejecutará un thread cuando se llame al método <code>start()</code>.</p>`,23),_={href:"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html",target:"_blank",rel:"noopener noreferrer"},R=p(`<p>Vamos a ver un ejemplo de creación de una clase que herede de Thread:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">MyThread</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">extends</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Thread</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">      System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">MyThread running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para crear y lanzar un nuevo thread tenemos que usar el siguiente código</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">MyThread</span><span style="color:#90A4AE;"> myThread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MyThread</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">myTread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>La llamada al método start() devuelve el control al thread principal en cuanto el hilo asociado se inicia. A diferencia del ejemplo de la cuenta atrás, cuando llamamos al método start <strong>el hilo principal no espera a que el método run() se ejecute por completo</strong> antes de seguir. El método run() se ejecutará en un hilo de ejecución diferente, dentro del mismo proceso y compitiendo por las unidades de procesamiento del sistema. Al igual que en los casos anteriores, cuando se ejecute el método run() mostrará por pantalla el mensaje &quot;MyThread running&quot; y el hilo terminará su ejecución (y su vida) porque finaliza el código del método run().</p><p>El ejemplo se puede repetir con una clase anónima, aunque ya no con una expresión lambda, ya que la clase Thread tiene muchos más métodos y no es una interfaz funcional.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">Thread</span><span style="color:#90A4AE;"> thread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Thread</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Thread Running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>El ejemplo mostrará el mensaje &quot;Thread running&quot; cuando el método run() se ejecutado por el nuevo thread.</p><div class="custom-container question"><p class="custom-container-title">Ejemplo Cuenta atrás</p><p>Copia el ejemplo original de la &quot;Cuenta Atrás&quot; y haz que la clase LiftOff ahora herede de Thread. Ahora, en vez de llamar directamente al método run, haz que los threads llamen al método start().</p><p>El mensaje &quot;Comienza la cuenta atrás!&quot; ¿aparece ahora en el sitio correcto? ¿Porqué sale antes si en el código está después?</p><p>Crea nuevas instancias de LiftOff y has que se lancen en el main ¿En qué ha cambiado ahora la ejecución de las aplicación respecto a una aplicación monohilo? ¿Qué puedes extraer de la salida del programa?</p></div><details class="custom-container details"><summary>Respuesta a las cuestiones planteadas</summary><p>Ahora el mensaje &quot;Comienza la cuenta atrás!&quot; sí aparece, en la salida, en la posición correcta, es decir, antes de la cuenta atrás. Si observamos el código, siguiendo una lógica secuencial, el mensaje debería aparecer después, como pasó en la primera prueba que hicimos.</p><p>La diferencia ahora es que el código del run() lo está ejecutando un hilo diferente, y desde el momento en que se hace el start() el control vuelve al hilo principal (main) que continúa ejecutando las líneas de código que hay en el método main. La creación de un hilo, aunque menos que la de un proceso, también tiene un coste de recursos y temporal, por lo que el hilo tarda unos instantes en empezar a ejecutarse. Por eso el hilo principal tiene tiempo de ejecutar la siguiente instrucción y mostrar el mensaje.</p><p>La gran diferencia ahora, que podemos observar en la salida, es que los hilos se están ejecutando concurrentemente, ya que vemos como sus salidas se intercalan.</p><p>Esa es la diferencia más obvia. Sin embargo, si ejecutamos el programa varias veces, podremos observar que no hay dos ejecuciones iguales. No depende de nosotros el orden en el que se ejecutan las instrucciones, sino que depende de la planificación que realice el SO. En este contexto nos encontramos con una ejecución aleatoria o <strong>indeterminista</strong> como la denominamos en el primer tema.</p><p>El cómo controlar ese orden es lo que trabajaremos en la segunda parte del tema.</p></details><div class="custom-container info"><p class="custom-container-title">¿Cuándo termina un proceso?</p><p>En el ejemplo anterior, la última línea del hilo principal se ejecuta antes que el código de los hilos. ¿Qué pasa entonces con el proceso?</p><p>En un proceso monohilo, estamos acostumbrados a que el proceso sigue en ejecución (vivo) mientras el código que hayamos puesto en el main esté ejecutándose. En concreto mientras el main-thread esté en ejecución.</p><p><img src="`+D+`" alt="Ciclo de vida de un proceso"></p><p>Cuando un proceso tiene mas hilos, la norma es que el proceso no finaliza su ejecución hasta que el último de los hilos haya terminado. Así que podemos encontrarnos, como en ejemplo de la cuenta atrás, que el main-thread acaba y el proceso sigue en ejecución.</p></div><h2 id="_3-1-3-starting-a-thread-with-a-runnable" tabindex="-1">3.1.3 Starting a Thread With a Runnable</h2><p>Para hacer que un thread ejecute el código del método run de una clase (instancia de clase, clase anónima, expresión lambda) que implemente la interfaz Runnable, tenemos que pasar esa instancia como parámetro en el constructor de la clase Thread. Veamos cómo se hace:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">Runnable</span><span style="color:#90A4AE;"> runnable </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MyRunnable</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// or an anonymous class, or lambda...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9C3EDA;">Thread</span><span style="color:#90A4AE;"> thread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Thread</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">runnable</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Cuando se inicia el thread, llamando a su método start(), se crea un nuevo thread que ejecuta el código del método run de la instancia MyRunnable. El ejemplo anterior imprimirá el texto &quot;MyRunnable running (ver el código de MyRunnable en los ejemplos anteriores).</p><div class="custom-container info"><p class="custom-container-title">Información</p><p>En resumen, tenemos dos formas de indicarle a un thread qué código debe ejecutar.</p><ul><li>Crear una subclase de Thread y sobrescribir el método run().</li><li>Pasar una instancia de un objeto que implemente la interfaz Runnable al constructor de Thread.</li></ul><p><strong>En ambos casos, para que se cree el thread y ejecute el código del método run, debemos llamar al método start() del objeto Thread.</strong></p></div>`,16),S=s("div",{class:"language-java line-numbers-mode","data-ext":"java"},[s("pre",{class:"shiki material-theme-lighter",style:{"background-color":"#FAFAFA"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#9C3EDA"}},"public"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"class"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#E2931D"}},"EjemploThread"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"extends"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#E2931D"}},"Thread"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#9C3EDA"}},"public"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"void"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"run"),s("span",{style:{color:"#39ADB5"}},"()"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#39ADB5"}},"    "),s("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Código del hilo")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#39ADB5"}},"}")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#9C3EDA"}},"public"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"static"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"void"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"main"),s("span",{style:{color:"#39ADB5"}},"("),s("span",{style:{color:"#9C3EDA"}},"String"),s("span",{style:{color:"#39ADB5"}},"[]"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#90A4AE","font-style":"italic"}},"args"),s("span",{style:{color:"#39ADB5"}},")"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"    "),s("span",{style:{color:"#9C3EDA"}},"EjemploThread"),s("span",{style:{color:"#90A4AE"}}," hilo "),s("span",{style:{color:"#39ADB5"}},"="),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5","font-style":"italic"}},"new"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"EjemploThread"),s("span",{style:{color:"#39ADB5"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"    hilo"),s("span",{style:{color:"#39ADB5"}},"."),s("span",{style:{color:"#6182B8"}},"start"),s("span",{style:{color:"#39ADB5"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#39ADB5"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#39ADB5"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"highlight-lines"},[s("div",{class:"highlight-line"}," "),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("br"),s("br")]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),z=s("div",{class:"language-java line-numbers-mode","data-ext":"java"},[s("pre",{class:"shiki material-theme-lighter",style:{"background-color":"#FAFAFA"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#9C3EDA"}},"public"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"class"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#E2931D"}},"EjemploRunnable"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"implements"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#E2931D"}},"Runnable"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#9C3EDA"}},"public"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"void"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"run"),s("span",{style:{color:"#39ADB5"}},"()"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#39ADB5"}},"    "),s("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Código del hilo")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#39ADB5"}},"}")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#9C3EDA"}},"public"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"static"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#9C3EDA"}},"void"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"main"),s("span",{style:{color:"#39ADB5"}},"("),s("span",{style:{color:"#9C3EDA"}},"String"),s("span",{style:{color:"#39ADB5"}},"[]"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#90A4AE","font-style":"italic"}},"args"),s("span",{style:{color:"#39ADB5"}},")"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"    "),s("span",{style:{color:"#9C3EDA"}},"Thread"),s("span",{style:{color:"#90A4AE"}}," hilo "),s("span",{style:{color:"#39ADB5"}},"="),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#39ADB5","font-style":"italic"}},"new"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"Thread"),s("span",{style:{color:"#39ADB5"}},"("),s("span",{style:{color:"#39ADB5","font-style":"italic"}},"new"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#6182B8"}},"EjemploRunnable"),s("span",{style:{color:"#39ADB5"}},"());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"    hilo"),s("span",{style:{color:"#39ADB5"}},"."),s("span",{style:{color:"#6182B8"}},"start"),s("span",{style:{color:"#39ADB5"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"  "),s("span",{style:{color:"#39ADB5"}},"}"),s("span",{style:{color:"#90A4AE"}},"    ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#39ADB5"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"highlight-lines"},[s("div",{class:"highlight-line"}," "),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("br"),s("br")]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),k=p(`<h3 id="subclass-or-runnable" tabindex="-1">Subclass or Runnable?</h3><p>No hay nada que indique que una forma es mejor que otra. Ambos métodos son similares y el resultado es el mismo. . <strong>El método preferido debería ser implementar Runnable</strong>, y pasarle la instancia al constructor de Thread.</p><p>unas cuantas razones en contra de usar Thread</p><ul><li>Cuando heredamos de la clase Thread, no estamos sobrescribiendo ninguno de sus métodos. Por contra, estamos sobrescribiendo un método de la interfaz Runnable (que Thread implementa internamente . Esto supone una clara violación del principio IS-A del Thread.</li><li>Cuando pasamos la instancia de Runnable y la utilizamos como argumento en el constructor de Thread estamos usando composición y no herencia, lo cual permite mucha más flexibilidad.</li><li>Si heredamos de Thread, ya no podemos heredar de otras clases. Esto supone un gran problema cuando usamos librerías o componentes gráficos, ya que Java noi permite la herencia múltiple.</li><li>Desde Java 8 en adelante, la interfaz Runnable se puede representar con expresiones lambda</li></ul><div class="custom-container danger"><p class="custom-container-title">Error común: Llamar a run () en vez de a start()</p><p>Cuando empezamos a trabajar con hilos, un error muy común es llamar directamente al método run en vez de llamar al método start():</p><blockquote><p>Thread newThread = new Thread(MyRunnable()); newThread.run(); //should be start();</p></blockquote><p>or</p><blockquote><p>MyRunnable runnable = new MyRunnable(); runnable.run();</p></blockquote><p>En principio no notamos ningún error ya que el código de run() se ejecuta y podemos ver los resultados. Sin embargo, ese código <strong>no es ejecutado por el nuevo thread</strong> que acabamos de crear. El método run() es ejecutado por el thread que ha creado el objeto, es decir, el mismo thread que ha ejecutado las líneas anteriores a la llamada a run().</p><p>Para hacer que el método run, de una instancia que implemente Runnable o de una que herede de Thread, sea ejecutado por un el nuevo thread que acabamos de crear, newThread, debemos llamar al método newThread.start().</p></div><h2 id="_3-1-4-metodos-de-la-clase-java-lang-thread" tabindex="-1">3.1.4 Métodos de la clase java.lang.Thread</h2><p>Si miramos a la definición de la clase Thread veremos que tiene muchos métodos. Debemos tener cuidado ya que algunos de estos métodos como stop(), suspend(), resume() and destroy() han sido marcados como <code>obsoletos(deprecated)</code>.</p><p>Veamos algunos de los métodos de la clase Thread más utilizados:</p><table><thead><tr><th style="text-align:left;">Method</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">start()</td><td style="text-align:left;">Hace que un nuevo thread ejecute el código del método run()</td></tr><tr><td style="text-align:left;">boolean isAlive()</td><td style="text-align:left;">Comprueba si un thread está vivo o no</td></tr><tr><td style="text-align:left;">sleep(long ms)</td><td style="text-align:left;">Cambia el estado del thread a bloqueado durante los ms indicados</td></tr><tr><td style="text-align:left;">run()</td><td style="text-align:left;">Es el código que el thread ejecuta. Es llamado por el método start(). Representa el ciclo de vida de un thread.</td></tr><tr><td style="text-align:left;">String toString()</td><td style="text-align:left;">Devuelve una representación legible de un thread [nombre, priority, nombre_del_grupo</td></tr><tr><td style="text-align:left;">long getId()</td><td style="text-align:left;">Devuelve el identificador del thread (es un id asignado por el proceso)</td></tr><tr><td style="text-align:left;">void yield()</td><td style="text-align:left;">Hace que el hilo pare su ejecución instantáneamente volviendo a la cola y permitiendo que otros hilos y/o procesos se ejecuten.</td></tr><tr><td style="text-align:left;">void join()</td><td style="text-align:left;">Se llama desde otro thread y hace que el thread que lo invoca se bloquee hasta que el thread termine. Es parecido a p.waitFor() para los procesos</td></tr><tr><td style="text-align:left;">String getName()</td><td style="text-align:left;">Obtiene el nombre del thread</td></tr><tr><td style="text-align:left;">String setName(String name)</td><td style="text-align:left;">Cambia el nombre del thread</td></tr><tr><td style="text-align:left;">int getPriority()</td><td style="text-align:left;">Obtiene la prioridad del thread</td></tr><tr><td style="text-align:left;">setPriority(int p)</td><td style="text-align:left;">Modifica la prioridad del thread</td></tr><tr><td style="text-align:left;">void interrupt()</td><td style="text-align:left;">Interrumpe la ejecución del thread provocando que salte una excepción de tipo InterruptedException</td></tr><tr><td style="text-align:left;">boolean interrupted()</td><td style="text-align:left;">Comprueba si un thread ha sido interrumpido</td></tr><tr><td style="text-align:left;">Thread.currentThread()</td><td style="text-align:left;">Método estático de la clase Thread que devuelve una referencia al hilo que está ejecutando el código</td></tr><tr><td style="text-align:left;">boolean isDaemon()</td><td style="text-align:left;">Comprueba si un hilo es un servicio/demonio. Un proceso/hilo de baja prioridad que se ejecuta de forma independiente de su proceso padre. Un proceso puede finalizar aunque un hilo <em>daemon</em> esté todavía ejecutándose.</td></tr><tr><td style="text-align:left;">setDaemon(boolean on)</td><td style="text-align:left;">Convierte un hilo en un demonio/servicio. Por defecto todos los hilos se crean como hilos de usuario.</td></tr><tr><td style="text-align:left;">int activeCount()</td><td style="text-align:left;">Devuelve el número de hilos pertenecientes a un grupo que siguen activos.</td></tr><tr><td style="text-align:left;">Thread.State getState()</td><td style="text-align:left;">Devuelve el estado actual del hilo. Los posibles valores son NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING or TERMINATED.</td></tr></tbody></table><p>La clase Thread también tiene unos 9 constructores, la mayoría de ellos están duplicados permitiendo recibir un objeto Runnable como parámetro</p><table><thead><tr><th style="text-align:left;">Constructores de la clase Thread</th></tr></thead><tbody><tr><td style="text-align:left;">Thread()</td></tr><tr><td style="text-align:left;">Thread​(Runnable target)</td></tr><tr><td style="text-align:left;">Thread​(String name)</td></tr><tr><td style="text-align:left;">Thread​(Runnable target, String name)</td></tr><tr><td style="text-align:left;">Thread​(ThreadGroup group, Runnable target)</td></tr><tr><td style="text-align:left;">Thread​(ThreadGroup group, Runnable target, String name)</td></tr><tr><td style="text-align:left;">Thread​(ThreadGroup group, Runnable target, String name, long stackSize)</td></tr><tr><td style="text-align:left;">Thread​(ThreadGroup group, Runnable target, String name, long stackSize, boolean inheritThreadLocals)</td></tr></tbody></table><p>Veamos un ejemplo práctico de uso de todos estos métodos</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U3S2_ThreadMethodsExample</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">extends</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Thread</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#6182B8;">U3S2_ThreadMethodsExample</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">ThreadGroup</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">group</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">name</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Call to parent class constructor with group and thread name</span></span>
<span class="line"><span style="color:#90A4AE;">        super</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">group</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> name</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">@</span><span style="color:#9C3EDA;">Override</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> threadName </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getName</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">[</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">threadName</span><span style="color:#39ADB5;">+</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">] </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Inside the thread</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">[</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">threadName</span><span style="color:#39ADB5;">+</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">] </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Priority: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">          </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getPriority</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">yield</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">[</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">threadName</span><span style="color:#39ADB5;">+</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">] </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Id: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">          </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getId</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">[</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">threadName</span><span style="color:#39ADB5;">+</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">] </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">ThreadGroup: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">          </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getThreadGroup</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getName</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">[</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">threadName</span><span style="color:#39ADB5;">+</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">] </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">ThreadGroup count: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">          </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getThreadGroup</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">activeCount</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// main thread </span></span>
<span class="line"><span style="color:#90A4AE;">        Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">setName</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Main</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getName</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">currentThread</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">ThreadGroup</span><span style="color:#90A4AE;"> even </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ThreadGroup</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Even threads</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">ThreadGroup</span><span style="color:#90A4AE;"> odd </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ThreadGroup</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Odd threads</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">Thread</span><span style="color:#90A4AE;"> localThread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> i</span><span style="color:#39ADB5;">=</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> i</span><span style="color:#39ADB5;">&lt;</span><span style="color:#F76D47;">10</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> i</span><span style="color:#39ADB5;">++)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            localThread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">U3S2_ThreadMethodsExample</span><span style="color:#39ADB5;">((</span><span style="color:#90A4AE;">i</span><span style="color:#39ADB5;">%</span><span style="color:#F76D47;">2</span><span style="color:#39ADB5;">==</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">)</span><span style="color:#39ADB5;font-style:italic;">?</span><span style="color:#90A4AE;">even</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;">odd</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Thread</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">i</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            localThread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setPriority</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">i</span><span style="color:#39ADB5;">+</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            localThread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">              </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">try</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            localThread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">join</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// --&gt; Will wait until last thread ends </span></span>
<span class="line"><span style="color:#39ADB5;">                                </span><span style="color:#90A4AE;font-style:italic;">// like a waitFor() for processes</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">catch</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">InterruptedException</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">ex</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">printStackTrace</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">err</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">The main thread was interrupted while waiting for </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">              </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> localThread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">toString</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">to finish</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Main thread ending</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En el ejemplo anterior podemos ver cómo tenemos que ayudarnos del método estático <code>Thread.currentThread()</code> para saber qué hilo está ejecutándose en cada momento, ya que hay muchos hilos ejecutando el mismo código al mismo tiempo.</p><p>Hemos creado una única clase para los hilos y para el hilo principal. No debería ser una práctica común más allá de los ejemplos. Es mejor separar el código del objeto que hereda de Thread o que implementa Runnable en una clase aparte.</p><p>También es importante hacer ver que la clase Thread (o Runnable) puede tener sus propios constructores, propiedades y métodos, más allá del método run que están obligadas a sobrescribir. También puede invocar a los constructores de la superclase haciendo uso de super().</p><div class="custom-container question"><p class="custom-container-title">Dividir el código en dos clases</p><p>Copia el código de ThreadMethodsExample y divídelo en dos clases. Por un lado, una que contenga a la clase que extiende de Thread y otra que simplemente tenga el método main y el código para crear y lanzar los hilos..</p><p>Una vez dividido el código cambia U3S2_ThreadMethodsExample para que implemente la interfaz Runnable. Haz los cambios oportunos en la otra clase para que todo vuelva a funcionar como antes.</p></div><p>Si ejecutas el programa podrás ver que aunque los threads son lanzados en orden (1, 2, 3 etc.) su ejecución ya no se realiza de forma secuencial, pudiendo ocurrir que el thread 1 no sea el primero en mostrar su nombre por la salida estándar (System.out). Esto es debido a que los threads se ejecutan en paralelo y no de forma secuencial. La JVM y/o el sistema operativo determinan el orden en el que se ejecutan. Este orden no tiene porqué ser el mismo en el que se lanzaron ni cada vez que se ejecutan.</p><h3 id="como-pausar-un-hilo" tabindex="-1">Cómo pausar un hilo</h3><p>Un thread puede pausar su propia ejecución llamando al método estático <strong>Thread.sleep()</strong>. El método sleep() recibe como parámetro el número de milisegundos que quiere estar pausado antes de volver a ponerse como listo para ejecución. No es un método preciso al 100% (menos aún si utilizamos la versión que recibe ms y ns), pero aún así es bastante preciso. A continuación tenemos un ejemplo de un thread que se pausa durante 3 segundos (3000ms) llamando al método sleep():</p><div class="language-java" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;font-style:italic;">try</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">sleep</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">3000L</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">catch</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">InterruptedException</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">e</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    e</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">printStackTrace</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre></div><div class="custom-container info"><p class="custom-container-title">Simulación de sistema reales</p><p>Este es un método que vamos a utilizar exhaustivamente en las actividades para simular períodos de tiempo y acelerar las simulaciones.</p><p>Por ejemplo, podemos hacer un ajuste para que cada hora <em>real</em> se reduzca a un segundo. De esta forma podremos simular un día completo en tan solo 24 segundos.</p><p>También es interesante su uso para utilizar períodos de tiempo aleatorios en la ejecución de cada hilo, permitiendo así una simulación realista de los eventos en un sistema real.</p></div><p>En Java podemos generar números aleatorios en el rango de los enteros, long, float y double.</p><p>Tenemos tres métodos básicos para hacerlo</p><h4 id="method-1-usando-la-clase-random" tabindex="-1">Method 1: Usando la clase Random</h4><p>Podemos usar la clase <code>java.util.Random</code> para generar datos aleatorios, siguiendo los siguientes pasos:</p><ul><li>Importar la clase java.util.Random</li><li>Crear una instancia de la clase Random, por ejemplo <code>Random rand = new Random()</code></li><li>Llamar a alguno de los métodos del objeto: <ul><li>nextInt(limitesuperior) genera números aleatorios en el rango 0 a límitesuperior-1.</li><li>nextFloat() genera un float entre 0.0 and 1.0.</li><li>nextDouble() genera un double entre 0.0 and 1.0.</li></ul></li></ul><p>Si llamamos al método nextInt con parámetros (el límite superior), obtendremos números enteros en el rango</p><blockquote><p>int randomWithNextIntWithinARange = random.nextInt(max)</p></blockquote><p>Esto nos dará un número entre <em>0 (inclusive)</em> y <em>max</em> (no incluido) [min, max[. El valor del límite debe ser mayor que 0 sino obtendremos una java.lang.IllegalArgumentException.</p><h4 id="method-2-usando-math-random" tabindex="-1">Method 2: Usando Math.random</h4><p>Para generar números aleatorios en un rango podemos usar Math.random() siguiendo los pasos detallados a continuación:</p><ul><li>Declarar el valor mínimo del rango</li><li>Declarar el valor máximos del rango</li><li>Usar la fórmula <code>Math.random()*(max-min)+min</code> para generar valores entre <em>min</em> y <em>max</em>, ambos inclusive [min, max].</li></ul><p>El valor devuelto por Math.random() está en el rango [0, 1]</p><p>Para generar números entre 0 y un límite superior (50)</p><blockquote><p>Math.random()*50</p></blockquote><p>Para generar números entre 1 y un límite superior (50)</p><blockquote><p>Math.random()*49+1</p></blockquote><p>Para generar números en un rango predeterminado [200, 500]</p><blockquote><p>Math.random()*300+200</p></blockquote><h4 id="method-3-usar-threadlocalrandom" tabindex="-1">Method 3: Usar ThreadLocalRandom</h4><p>La clase <code>java.util.Random</code> no tiene buen rendimiento en entornos multihilo. De forma simplificada, el motivo es la contención, ya que muchos hilos comparten la misma instancia de Random y se tiene que secuenciar y sincronizar el acceso a sus métodos.</p><p>Para evitar esa limitación, Java introdujo la clase <code>java.util.concurrent.ThreadLocalRandom</code> para generar números aleatorios en entornos multihilo.</p><p>Si llamamos al método <code>ThreadLocalRandom.current()</code> nos devolverá la instancia de ThreadLocalRandom para el hilo actual. A partir de aquí podemos generar valores aleatorios llamando a los métodos de la clase con la instancia obtenida.</p><p>Para generar valores enteros sin límite:</p><blockquote><p>int unboundedRandomValue = ThreadLocalRandom.current().nextInt());</p></blockquote><p>Para generar valores enteros en un rango dato, es decir, con un límite superior e inferior [0, 100[:</p><blockquote><p>int boundedRandomValue = ThreadLocalRandom.current().nextInt(0, 100);</p></blockquote><p>Al igual que con Random, 0 está incluido en el rango mientra que 100 no.</p><p>También podemos generar otros tipos de datos como long y Double llamando a los métodos <code>nextLong()</code> y <code>nextDouble()</code> de forma similar a los ejemplos anteriores.</p><p>La clase ThreadLocalRandom hereda de Random, por lo que comparten muchos métodos y funcionalidad.</p><h3 id="gestion-de-la-prioridad-de-los-hilos" tabindex="-1">Gestión de la prioridad de los hilos</h3><p>Los hilos heredan la prioridad del padre en Java, pero este valor puede ser cambiado con el método <code>setPriority()</code> y con <code>getPriority()</code> podemos saber la prioridad de un hilo.</p><p>El valor de la prioridad varía entre 1 y 10. <em>Cuanto más alto es el valor, mayor es la prioridad</em>. La clase Thread define las siguientes constantes <code>MIN_PRIORITY</code> (valor 1) <code>MAX_PRIORITY</code> (valor 10) y <code>NORM_PRIORITY</code> (valor 5). El planificador elige el hilo en función de su prioridad. Si dos hilos tienen la misma prioridad realiza un round-robin, es decir de forma cíclica va alternando los hilos.</p><p>El hilo de mayor prioridad seguirá funcionando hasta que ceda el control por:</p><ul><li>Cede el control llamando al método yield().</li><li>Deja de ser ejecutable (por muerte o por bloqueo)</li><li>Aparece un hilo de mayor prioridad, por ejemplo si se encontraba en estado dormido por una operación de E/S o bien es desbloqueado por otro con los métodos notifyAll() / notify().</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U3S3_HiloPrioridad1</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">extends</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Thread</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> c </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> stopHilo </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">false;</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">long</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">getContador</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> c</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">long</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">pararHilo</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    stopHilo </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">true;</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">@</span><span style="color:#9C3EDA;">Override</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(!</span><span style="color:#90A4AE;">stopHilo</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> c</span><span style="color:#39ADB5;">++;</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U3S3_EjemploHiloPrioridad1</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">[])</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">U3S3_HiloPrioridad1</span><span style="color:#90A4AE;"> h1 </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">U3S3_HiloPrioridad1</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">U3S3_HiloPrioridad1</span><span style="color:#90A4AE;"> h2 </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">U3S3_HiloPrioridad1</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">U3S3_HiloPrioridad1</span><span style="color:#90A4AE;"> h3 </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">U3S3_HiloPrioridad1</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    h1</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setPriority</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Thread</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">NORM_PRIORITY</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    h2</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setPriority</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Thread</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">MAX_PRIORITY</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    h3</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setPriority</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Thread</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">MIN_PRIORITY</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    h1</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    h2</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    h3</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">try</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">      Thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">sleep</span><span style="color:#39ADB5;">(</span><span style="color:#F76D47;">10000</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">catch</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">InterruptedException</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">e</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    h1</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">pararHilo</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    h2</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">pararHilo</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    h3</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">pararHilo</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">h2 (Prio. Máx: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">h2</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getContador</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">h1 (Prio. Normal: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">h1</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getContador</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">h3 (Prio. Mínima: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;">h3</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getContador</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,57);function F(M,P){const c=o("DownloadPDF-component"),i=o("DocumentCover-component"),l=o("router-link"),t=o("ExternalLinkIcon"),r=o("CodeGroupItem"),d=o("CodeGroup");return y(),u("div",null,[n(c),n(i,{titulo:"3.1. Clases Java para la gestión de hilos"}),B,s("nav",v,[s("ul",null,[s("li",null,[n(l,{to:"#_3-1-1-el-interfaz-runnable"},{default:e(()=>[a("3.1.1. El interfaz Runnable")]),_:1}),s("ul",null,[s("li",null,[n(l,{to:"#clase-java-que-implementa-la-interfaz-runnable"},{default:e(()=>[a("Clase Java que implementa la interfaz Runnable")]),_:1})]),s("li",null,[n(l,{to:"#implementacion-con-clase-anonima-de-la-interfaz-runnable"},{default:e(()=>[a("Implementación con clase anónima de la interfaz Runnable")]),_:1})]),s("li",null,[n(l,{to:"#implementacion-de-runnable-a-traves-de-una-expresion-lambda"},{default:e(()=>[a("Implementación de Runnable a través de una expresión Lambda")]),_:1})]),s("li",null,[n(l,{to:"#llamar-al-metodo-run-de-una-clase-que-implemente-runnable"},{default:e(()=>[a("Llamar al método run de una clase que implemente Runnable")]),_:1})])])]),s("li",null,[n(l,{to:"#_3-1-2-thread-subclass"},{default:e(()=>[a("3.1.2 Thread subclass")]),_:1})]),s("li",null,[n(l,{to:"#_3-1-3-starting-a-thread-with-a-runnable"},{default:e(()=>[a("3.1.3 Starting a Thread With a Runnable")]),_:1}),s("ul",null,[s("li",null,[n(l,{to:"#subclass-or-runnable"},{default:e(()=>[a("Subclass or Runnable?")]),_:1})])])]),s("li",null,[n(l,{to:"#_3-1-4-metodos-de-la-clase-java-lang-thread"},{default:e(()=>[a("3.1.4 Métodos de la clase java.lang.Thread")]),_:1}),s("ul",null,[s("li",null,[n(l,{to:"#como-pausar-un-hilo"},{default:e(()=>[a("Cómo pausar un hilo")]),_:1})]),s("li",null,[n(l,{to:"#gestion-de-la-prioridad-de-los-hilos"},{default:e(()=>[a("Gestión de la prioridad de los hilos")]),_:1})])])])])]),b,h,g,q,f,j,C,s("blockquote",null,[s("p",null,[s("a",T,[a("java.lang.Runnable specification"),n(t)])])]),x,s("blockquote",null,[s("p",null,[s("a",_,[a("java.lang.Thread specification"),n(t)])])]),R,n(d,null,{default:e(()=>[n(r,{title:"Extends Thread",active:""},{default:e(()=>[S]),_:1}),n(r,{title:"Runnable"},{default:e(()=>[z]),_:1})]),_:1}),k])}const L=A(E,[["render",F],["__file","runnable.html.vue"]]);export{L as default};
