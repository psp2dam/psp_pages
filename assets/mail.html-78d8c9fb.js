import{_ as c,a as d}from"./e-mail_multipart_structure-37b2dbb2.js";import{_ as A,r as p,o as y,c as u,d as e,a as s,w as l,b as a,f as t}from"./app-15185a59.js";const m={},v=s("h1",{id:"_5-2-correo",tabindex:"-1"},"5.2 Correo",-1),B={class:"table-of-contents"},b=t('<h2 id="_5-2-1-jakarta-mail" tabindex="-1">5.2.1 Jakarta Mail</h2><p>Al buscar en Internet tutoriales sobre el envío de correos electrónicos usando Java, existe una alta probabilidad de que cada uno mencione algo llamado <code>Jakarta Mail</code> o <code>Java Mail</code>.</p><p>Durante mucho tiempo, Java Enterprise Edition (comúnmente conocido como Java EE), ha sido la plataforma de facto para desarrollar aplicaciones de misión crítica.</p><p>Recientemente, con el fin de impulsar la creación de aplicaciones nativas de la nube, varios proveedores de software prominentes se unieron para transferir tecnologías Java EE a la Fundación Eclipse, que es una organización sin fines de lucro encargada de administrar las actividades de la comunidad de software de código abierto Eclipse.</p><blockquote><p><strong>En consecuencia, Java EE ha sido renombrado a Jakarta EE.</strong></p></blockquote><p>A pesar del cambio de nombre, todas las clases principales y definiciones de propiedades siguen siendo las mismas tanto para Jakarta Mail como para JavaMail.</p><div class="custom-container tip"><p class="custom-container-title">Jakarta vs Java Mail</p><p>Para evitar confusiones, es importante tener en cuenta que JavaMail es solo el nombre anterior de Jakarta Mail y los dos representan el mismo software.</p></div><p>Entonces, Jakarta Mail, o JavaMail como a algunos todavía les gusta llamarlo, es una API para enviar y recibir correos electrónicos a través de <strong>SMTP</strong>, <strong>POP3</strong>, así como <strong>IMAP</strong> y es la opción más popular que también admite la autenticación TLS y SSL. Es independiente de la plataforma, independiente del protocolo e integrado en la plataforma Jakarta EE.</p><p>También puede encontrar Jakarta Mail como un paquete opcional para su uso con la plataforma Java SE.</p><h3 id="uso-de-la-libreria" tabindex="-1">Uso de la librería</h3>',10),g={href:"https://jakarta.ee/specifications/mail/2.1/jakarta-mail-spec-2.1",target:"_blank",rel:"noopener noreferrer"},D={href:"https://jakartaee.github.io/mail-api/",target:"_blank",rel:"noopener noreferrer"},E=t(`<div class="custom-container danger"><p class="custom-container-title">JavaMail API</p><p>Como su nombre indica, JavaMail API es una API, no una implementación. Por lo tanto, no puede usarlo directamente en su proyecto. En cambio, debe usar una implementación de la API de correo de Jakarta, como la implementación de referencia de la especificación de la API de correo de Jakarta.</p></div><p>También puede encontrar el archivo jakarta.mail-api-X.Y.Z.jar en el repositorio de Maven y agregarlo con dependencias <code>Maven</code>:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">dependencies&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">dependency&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">groupId&gt;org.eclipse.angus&lt;/groupId&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">artifactId&gt;angus-mail&lt;/artifactId&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">version&gt;2.0.2&lt;/version&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#6182B8;">type</span><span style="color:#90A4AE;">&gt;jar&lt;/</span><span style="color:#6182B8;">type</span><span style="color:#90A4AE;">&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">/dependency&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">dependency&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">groupId&gt;jakarta.mail&lt;/groupId&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">artifactId&gt;jakarta.mail-api&lt;/artifactId&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">version&gt;2.1.2&lt;/version&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#6182B8;">type</span><span style="color:#90A4AE;">&gt;jar&lt;/</span><span style="color:#6182B8;">type</span><span style="color:#90A4AE;">&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">/dependency&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">/dependencies&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container info"><p class="custom-container-title">Implementaciones de Jakarta Mail</p><p>En el ejemplo anterior hemos usado la implementación de Jakarta AngusMail, pero se pueden usar otras como la propia de Oracle, símplemente cambiando la dependencia.</p><blockquote><pre><code>   &lt;dependency&gt;
       &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;
       &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;
       &lt;version&gt;2.0.1&lt;/version&gt;
   &lt;/dependency&gt;        
</code></pre></blockquote><p>Al ser una implementación del API propuesta por Jakarta, el código debería funcionar sin cambios.</p></div><h2 id="_5-2-2-clases-principales-de-la-api-jakarta-mail" tabindex="-1">5.2.2 Clases principales de la API Jakarta Mail</h2><p>La API de correo de Jakarta tiene una amplia gama de clases e interfaces que se pueden usar para enviar, leer y realizar otras acciones con mensajes de correo electrónico, al igual que en un sistema de correo típico.</p><p>Aunque hay varios paquetes en el Proyecto de Correo de Jakarta, dos de los más utilizados son <code>jakarta.mail</code> y <code>jakarta.mail.internet</code>.</p><p>El paquete <strong>jakarta.mail</strong> proporciona clases que modelan un sistema de correo y el paquete <strong>jakarta.mail.internet</strong> proporciona clases que se centran en los sistemas de correo de Internet.</p><p>A continuación tenemos una descripción de las clases principales de cada uno de los paquetes:</p><h3 id="jakarta-mail-session" tabindex="-1">jakarta.mail.Session</h3><p>La clase Session, que no tiene subclases, es la <em>clase de nivel superior de la API de correo de Jakarta</em>. Es un objeto multiproceso que actúa como fábrica de conexiones para la API de correo de Jakarta. además de recopilar las propiedades y los valores predeterminados de la API de correo, <strong>es responsable de los ajustes de configuración y la autenticación</strong>.</p><p>Para obtener el objeto Session, puede llamar a cualquiera de los dos métodos siguientes:</p><ul><li>getDefaultInstance(), que devuelve la sesión predeterminada</li><li>getInstance(), que devuelve una nueva sesión</li></ul><h3 id="jakarta-mail-message" tabindex="-1">jakarta.mail.Message</h3><p>La clase Message es una <em>clase abstracta</em> que modela un mensaje de correo electrónico; Sus subclases soportan las implementaciones reales. Por lo general, su <code>subclase MimeMessage</code> <em>(jakarta.mail.internet.MimeMessage)</em> se utiliza para preparar los detalles del mensaje de correo electrónico que se enviará. <strong>Un MimeMessage es un mensaje de correo electrónico que utiliza el estilo de formato MIME (Multipurpose Internet Mail Extension)</strong> definido en el RFC822.</p><p>Estos son algunos de los métodos más utilizados de la clase MimeMessage:</p><table><thead><tr><th style="text-align:left;">Método</th><th style="text-align:left;">Descripción</th></tr></thead><tbody><tr><td style="text-align:left;">setFrom(Address addresses)</td><td style="text-align:left;">Se utiliza para establecer el campo de encabezado &quot;De&quot;.</td></tr><tr><td style="text-align:left;">setRecipients(Message.RecipientType type, String addresses)</td><td style="text-align:left;">Se utiliza para establecer el tipo de destinatario indicado en las direcciones proporcionadas. Los posibles tipos de direcciones definidos son &quot;Para&quot; (Message.RecipientType.TO), &quot;CC&quot; (Message.RecipientType.CC) y &quot;CCO&quot; (Message.RecipientType.BCC).</td></tr><tr><td style="text-align:left;">setSubject(String subject)</td><td style="text-align:left;">Se utiliza para establecer el campo de encabezado del asunto del correo electrónico.</td></tr><tr><td style="text-align:left;">setText(String text)</td><td style="text-align:left;">Se utiliza para establecer la cadena proporcionada como contenido del correo electrónico, utilizando el tipo MIME de &quot;texto / sin formato&quot;.</td></tr><tr><td style="text-align:left;">setContent(Object message, String contentType)</td><td style="text-align:left;">Se utiliza para establecer el contenido del correo electrónico y se puede utilizar con un tipo MIME que no sea &quot;text/html&quot;.</td></tr></tbody></table><h3 id="jakarta-mail-address" tabindex="-1">jakarta.mail.Address</h3><p>La clase Address es una <em>clase abstracta</em> que modela las direcciones (direcciones To y From) en un mensaje de correo electrónico; Sus subclases soportan las implementaciones reales. Por lo general, su <code>subclase InternetAddress</code>, que denota una dirección de correo electrónico de Internet, es la que mas se usa.</p><h3 id="jakarta-mail-authenticator" tabindex="-1">jakarta.mail.Authenticator</h3><p>La clase Authenticator es una <em>clase abstracta</em> que se utiliza para obtener autenticación para acceder a los recursos del servidor de correo, a menudo requiriendo la información del usuario. Por lo general, su <code>subclase PasswordAuthentication</code> es la que mas se usa.</p><h3 id="jakarta-mail-transport" tabindex="-1">jakarta.mail.Transport</h3><p>La clase Transport es una <em>clase abstracta</em> que utiliza el <code>protocolo SMTP</code> para enviar y transportar mensajes de correo electrónico.</p><h2 id="_5-2-3-3-enviar-correos-electronicos-basicos-en-jakarta-mail" tabindex="-1">5.2.3 3 Enviar correos electrónicos básicos en Jakarta Mail</h2><p>Básicamente, estos son los pasos para enviar un email utilizando la API de correo de Jakarta:</p><ol><li>Configurar detalles del servidor SMTP utilizando un <strong>objeto Java Properties</strong>. Puede obtener detalles del servidor SMTP de su proveedor de servicios de correo electrónico.</li><li>Crear un objeto Session llamando al método getInstance(). Luego, pasar el <code>nombre de usuario y contraseña de la cuenta</code> a PasswordAuthentication. Al crear el objeto de sesión, siempre debe registrar el <em>Authenticator</em> con la sesión.</li><li>Una vez creado el objeto Session, el siguiente paso es crear el email que se enviará. Para ello, empezaremos pasando el objeto de sesión creado al constructor de clase MimeMessage.</li><li>A continuación, después de crear el objeto de mensaje, establecer los campos De, Para y Asunto del email.</li><li>Utilizar el método <code>setText()</code> para establecer el contenido del mensaje de correo electrónico.</li><li>Utilizar el objeto Transport para enviar el correo.</li><li>Agregue excepciones para recuperar los detalles de cualquier posible error al enviar el mensaje.</li></ol><h3 id="preparacion-de-la-sesion" tabindex="-1">Preparación de la sesión</h3><p>El primer paso es obtener el objeto de sesión de correo. La clase <em>Session</em> es una clase singleton. Por lo tanto, no se puede crear directamente una instancia de la misma. Debemos llamar a uno de los métodos estáticos sobrecargados, generalmente <code>getInstance()</code>.</p>`,28),h={class:"custom-container info"},f=s("p",{class:"custom-container-title"},"Archivos/Objetos Properties",-1),q=s("p",null,"Un archivo de propiedades es un archivo de texto que contiene pares clave-valor para los valores de configuración de un proyecto.",-1),j=s("p",null,"Se pueden crear sobre la marcha como en los siguientes ejemplos, pero también se puede leer desde un archivo en el proyecto (esta es la forma preferida).",-1),M=s("p",null,"Aquí puedes encontrar algunos enlaces para echar un vistazo a cómo usar y acceder a estos archivos",-1),k={href:"https://www.arquitecturajava.com/java-properties-files-y-como-usarlos/",target:"_blank",rel:"noopener noreferrer"},_={href:"https://www.baeldung.com/java-properties",target:"_blank",rel:"noopener noreferrer"},P={href:"https://www.javatpoint.com/properties-class-in-java",target:"_blank",rel:"noopener noreferrer"},x=s("p",null,[s("img",{src:c,alt:"http://www.instanceofjava.com/2018/01/how-to-read-values-from-properties-file.html"})],-1),C=s("p",null,"En la imagen anterior puedes ver dónde colocar el archivo de propiedades en un proyecto 'Maven'.",-1),I=t(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Prepare SMTP configuration into a Property object</span></span>
<span class="line"><span style="color:#9C3EDA;">final</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">Properties</span><span style="color:#90A4AE;"> prop </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Properties</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.username</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">usuario@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.password</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">passwordEmail</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.host</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">smtp.gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.port</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">587</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.auth</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">true</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.starttls.enable</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">true</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// TLS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Create the Session with the user credentials</span></span>
<span class="line"><span style="color:#9C3EDA;">Session</span><span style="color:#90A4AE;"> mailSession </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> Session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getInstance</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">Authenticator</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">@</span><span style="color:#9C3EDA;">Override</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">protected</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">PasswordAuthentication</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">getPasswordAuthentication</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">PasswordAuthentication</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.username</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">),</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">                    prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.password</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En el código anterior, acabamos de crear el objeto Session con propiedades y el objeto Authenticator.</p><p>Las propiedades son las siguientes.</p><ul><li>mail.smtp.username – Nombre de usuario para acceder al servidor SMTP</li><li>mail.smtp.password – Contraseña de acceso al servidor SMTP</li><li>mail.smtp.host – Host del servidor SMTP</li><li>mail.smtp.port – Puerto</li><li>mail.smtp.auth – Se requiere autenticación.</li><li>mail.smtp.starttls.enable – TLS habilitado o no.</li></ul><p>El Authenticator es una clase abstracta. Su objeto se crea proporcionando una implementación anónima del método <code>getPasswordAuthentication()</code>. La clase <em>PasswordAuthentication</em> se utiliza como marcador para almacenar credenciales de usuario.</p><p>Este es un código de ejemplo para leer las propiedades de un archivo en el proyecto.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">loadSMTPConfiguration</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">try</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">InputStream</span><span style="color:#90A4AE;"> input </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">this.</span><span style="color:#6182B8;">getClass</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getResourceAsStream</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> propertiesFile</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">            smtpConfiguration </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Properties</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// load a properties file</span></span>
<span class="line"><span style="color:#90A4AE;">            smtpConfiguration</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">load</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">input</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// get the property value and print it out</span></span>
<span class="line"><span style="color:#90A4AE;">            smtpConfiguration</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">forEach</span><span style="color:#39ADB5;">((</span><span style="color:#90A4AE;">key</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> value</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">-&gt;</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Key : </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> key </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">, Value : </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> value</span><span style="color:#39ADB5;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">catch</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">ex</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">err</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Cant open properties file: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getLocalizedMessage</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">            ex</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">printStackTrace</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>El contenido del archivo de propiedades podría ser así</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;"># Data to send emails from a GMAIL account</span></span>
<span class="line"><span style="color:#90A4AE;">mail.from=cuenta@iesdoctorbalmis.com ó cuenta@gmail.com</span></span>
<span class="line"><span style="color:#90A4AE;">mail.username=cuenta@iesdoctorbalmis.com</span></span>
<span class="line"><span style="color:#90A4AE;">mail.password=***contraseña de la cuenta habilitando apps poco seguras o contraseña de app con 2FA***</span></span>
<span class="line"><span style="color:#90A4AE;"></span></span>
<span class="line"><span style="color:#90A4AE;">mail.smtp.host=smtp.gmail.com</span></span>
<span class="line"><span style="color:#90A4AE;">mail.smtp.port=587</span></span>
<span class="line"><span style="color:#90A4AE;">mail.smtp.auth=true</span></span>
<span class="line"><span style="color:#90A4AE;">mail.smtp.starttls.enable=true</span></span>
<span class="line"><span style="color:#90A4AE;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="composicion-del-mensaje-texto-sin-formato" tabindex="-1">Composición del mensaje (texto sin formato)</h3><p>A continuación, redactaremos el mensaje de correo electrónico. La clase jakarta.mail.Message representa un mensaje en Java mail API. Dado que es una clase abstracta, usaremos su clase de implementación concreta <code>jakarta.mail.internet.MimeMessage</code>. Java Mail API permite enviar correo en texto plano o en contenido HTML. Comencemos enviando un mensaje de texto sin formato.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Prepare the MimeMessage</span></span>
<span class="line"><span style="color:#9C3EDA;">Message</span><span style="color:#90A4AE;"> message </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeMessage</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">mailSession</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Set From and subject email properties</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setFrom</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">InternetAddress</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">no-reply@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setSubject</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Sending Mail with pure Java Mail API </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Set to, cc &amp; bcc recipients        </span></span>
<span class="line"><span style="color:#9C3EDA;">InternetAddress</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> toEmailAddresses </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        InternetAddress</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">parse</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user1@gmail.com, user2@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#9C3EDA;">InternetAddress</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> ccEmailAddresses </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        InternetAddress</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">parse</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user21@gmail.com, user22@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#9C3EDA;">InternetAddress</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> bccEmailAddresses </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        InternetAddress</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">parse</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user31@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            </span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setRecipients</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Message</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">RecipientType</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">TO</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">toEmailAddresses</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setRecipients</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Message</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">RecipientType</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">CC</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">ccEmailAddresses</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setRecipients</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Message</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">RecipientType</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">BCC</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">bccEmailAddresses</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">/* Mail body with plain Text */</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setText</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Hello User,</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\\n\\n</span><span style="color:#91B859;"> If you read this, means mail sent with Java Mail API is successful</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Para enviar un correo electrónico en texto sin formato, simplemente pasamos el texto en el método message.setText().</strong></p></blockquote><h3 id="enviar-mensaje" tabindex="-1">Enviar mensaje</h3><p>Hasta ahora, hemos creado una sesión y redactado el mensaje. Ahora es el momento de enviar el mensaje a los destinatarios. Usaremos la clase jakarta.mail.Transport para hacerlo. La clase proporciona métodos <code>send()</code> sobrecargados.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Send the configured message in the session</span></span>
<span class="line"><span style="color:#90A4AE;">    Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,16),w={class:"custom-container info"},T=s("p",{class:"custom-container-title"},"Emails temporales",-1),S={href:"http://www.yopmail.com/en/",target:"_blank",rel:"noopener noreferrer"},J=t(`<h2 id="_5-2-4-enviar-mensajes-html" tabindex="-1">5.2.4 Enviar mensajes HTML</h2><p>En términos de usabilidad, el contenido HTML es muy superior al texto sin formato. Por lo tanto, la mayoría de las veces enviamos emails en formato HTML. Java Mail API admite el envío de correos electrónicos en formato HTML. Para enviar un correo electrónico con contenido HTML, debemos reemplazar el método message.setText() con el siguiente código.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">...</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContent</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Just discovered that Jakarta Mail is fun and easy to use</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">text/html</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>usaremos el método <strong>setContent()</strong> para establecer el contenido y especificar <code>&quot;text/html&quot;</code> en el segundo argumento, lo que indica que el mensaje tiene formato HTML.</p></blockquote><h2 id="_5-2-5-enviar-correo-electronico-con-archivos-adjuntos" tabindex="-1">5.2.5 Enviar correo electrónico con archivos adjuntos</h2><p>Además de los pasos mencionados anteriormente, estos son los diferentes pasos involucrados en el uso de la API de correo de Jakarta para enviar archivos adjuntos de correo electrónico:</p><ol><li>Creamos una instancia del objeto <code>MimeMultipart</code> que se utilizará como envoltorio o <em>wrapper</em> para las distintas partes <em>MimeBodyPart</em>. <strong>Un <em>MultiPart</em> actúa como un contenedor que guarda varias partes individuales</strong>, y viene con métodos para obtener y configurar sus diversas subpartes.</li><li>Luego, establecemos la primera parte del objeto <em>Multipart</em> pasándole el mensaje real.</li><li>A continuación, establecemos la segunda y las siguientes parte del objeto <em>Multipart</em> agregando los datos adjuntos.</li><li>Incluimos el objeto <em>Multipart</em> en el mensaje a enviar.</li><li>Enviamos el mensaje</li></ol><p><img src="`+d+`" alt="Estructura del mensaje MIME Multipart"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;"> </span><span style="color:#90A4AE;font-style:italic;">// create an instance of multipart object</span></span>
<span class="line"><span style="color:#9C3EDA;">Multipart</span><span style="color:#90A4AE;"> multipart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeMultipart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// create the 1st message body part</span></span>
<span class="line"><span style="color:#9C3EDA;">MimeBodyPart</span><span style="color:#90A4AE;"> messageBodyPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add a plain message (HTML can also be added with setContent)</span></span>
<span class="line"><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setText</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Please find the attachment sent using Jakarta Mail</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the BodyPart to the Multipart object</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;">            </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 2nd. bodyPart with an attached file</span></span>
<span class="line"><span style="color:#90A4AE;">messageBodyPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> filename </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">C:/temp/file1.pdf</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">attachFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">filename</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the BodyPart to the Multipart object</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;">            </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the multipart object to the message</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContent</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Send the message with multipart MIME objects</span></span>
<span class="line"><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="enviar-correos-electronicos-html-con-imagenes" tabindex="-1">Enviar correos electrónicos HTML con imágenes</h2><p>Para agregar una imagen a su correo electrónico HTML en Jakarta Mail, puede elegir cualquiera de las tres opciones comunes:</p><ul><li>Insertando imágenes CID.</li><li>Insertando imágenes en línea o codificación Base64.</li><li>Enlazando imágenes.</li></ul><h3 id="insertando-imagenes-cid-content-id" tabindex="-1">Insertando imágenes CID (Content-ID)</h3><p>Para insertar imágenes CID, debemos crear un mensaje <code>MIME multipart/related</code> usando el siguiente código:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// 1st part of the message. An HTML code with a CID referenced image</span></span>
<span class="line"><span style="color:#9C3EDA;">Multipart</span><span style="color:#90A4AE;"> multipart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeMultipart</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">related</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#9C3EDA;">MimeBodyPart</span><span style="color:#90A4AE;"> htmlPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">//add reference to your image to the HTML body &lt;img src=&quot;cid:some-image-cid&quot; alt=&quot;img&quot; /&gt;</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> messageBody </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">&lt;p&gt;&lt;/p&gt;&lt;img src=</span><span style="color:#90A4AE;">\\&quot;</span><span style="color:#91B859;">cid:my-test-image-cid</span><span style="color:#90A4AE;">\\&quot;</span><span style="color:#91B859;"> alt=</span><span style="color:#90A4AE;">\\&quot;</span><span style="color:#91B859;">embedded img</span><span style="color:#90A4AE;">\\&quot;</span><span style="color:#91B859;"> /&gt;&lt;/p&gt;</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">htmlPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setText</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">messageBody</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">utf-8</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">html</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the BodyPart to the Multipart object</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">htmlPart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 2nd part of the message. The image with special CID header markers</span></span>
<span class="line"><span style="color:#9C3EDA;">MimeBodyPart</span><span style="color:#90A4AE;"> imgPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// imageFile is the file containing the image</span></span>
<span class="line"><span style="color:#90A4AE;">imgPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">attachFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">imageFile</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// or, if the image is in a byte array in memory, use</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// imgPart.setDataHandler(new DataHandler(</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">//      new ByteArrayDataSource(bytes, &quot;image/whatever&quot;)));</span></span>
<span class="line"><span style="color:#90A4AE;">imgPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContentID</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">&lt;my-test-image-cid&gt;</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the multipart object to the message</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">imgPart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the multipart object to the message</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContent</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Send the message with multipart MIME objects</span></span>
<span class="line"><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="insertando-imagenes-en-linea-base64" tabindex="-1">Insertando imágenes en línea (Base64)</h3><p>Para la inserción en línea o la codificación Base64, debe incluir los datos de imagen codificados en el cuerpo HTML de forma similar a esta:</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">&lt;</span><span style="color:#E53935;">img</span><span style="color:#39ADB5;"> </span><span style="color:#9C3EDA;">src</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">data:image/jpeg;base64,base64-encoded-data-here</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">tamaño del HTML</p><p>Cada dígito Base64 representa 6 bits de datos, por lo que el código generado para una imagen real será bastante grande.</p><p>Como esto afecta el tamaño total del mensaje HTML, es mejor no usar imágenes grandes en línea.</p></div><p>Para codificar/decodificar una secuencia en Base 64 podemos usar la clase <code>java.util.Base64</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> fileContent </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FileInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">imageFile</span><span style="color:#39ADB5;">).</span><span style="color:#6182B8;">readAllBytes</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> base64EncodedData </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> Base64</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getEncoder</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">encodeToString</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileContent</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,21),F={class:"custom-container tip"},L=s("p",{class:"custom-container-title"},"Codificación base64",-1),z=s("p",null,"Base64 es una buena opción para enviar datos binarios a través de protocolos de texto como HTTP, sin pérdida de información.",-1),H=s("p",null,"Esta operación se puede aplicar a cualquier archivo binario. Es útil cuando necesitamos transferir contenido binario en formato JSON, por ejemplo desde la aplicación móvil al endpoint de conexión REST.",-1),R={href:"https://www.baeldung.com/java-base64-image-string",target:"_blank",rel:"noopener noreferrer"},O=t(`<h3 id="linked-images" tabindex="-1">Linked images</h3><p>Por último, tenemos imágenes vinculadas que son esencialmente imágenes alojadas en algún servidor externo al que luego crea un enlace. Podemos hacerlo usando la etiqueta img en el cuerpo HTML de la siguiente manera.</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">&lt;</span><span style="color:#E53935;">img</span><span style="color:#39ADB5;"> </span><span style="color:#9C3EDA;">src</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/wp-content/uploads/2018/11/blog/-illustration-email-embedding-images.png</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;"> </span><span style="color:#9C3EDA;">alt</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">img</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">Debug Jakarta Mail</p><p>La depuración juega un papel fundamental en las pruebas de envío de correo electrónico.</p><p>En Jakarta Mail, es bastante sencillo. Tan solo hay que establecer debug a true en las propiedades de configuración de la sesión:</p><blockquote><p>props.put(&quot;mail.debug&quot;, &quot;true&quot;);</p></blockquote><p>Como resultado, obtendremos una descripción paso a paso de cómo se ejecuta el código. Si aparece algún problema con el envío del mensaje, comprenderemos instantáneamente lo que ha sucedido y en qué paso.</p></div>`,4);function U(N,V){const r=p("DownloadPDF-component"),i=p("DocumentCover-component"),n=p("router-link"),o=p("ExternalLinkIcon");return y(),u("div",null,[e(r),e(i,{titulo:"5.2 Correo"}),v,s("nav",B,[s("ul",null,[s("li",null,[e(n,{to:"#_5-2-1-jakarta-mail"},{default:l(()=>[a("5.2.1 Jakarta Mail")]),_:1}),s("ul",null,[s("li",null,[e(n,{to:"#uso-de-la-libreria"},{default:l(()=>[a("Uso de la librería")]),_:1})])])]),s("li",null,[e(n,{to:"#_5-2-2-clases-principales-de-la-api-jakarta-mail"},{default:l(()=>[a("5.2.2 Clases principales de la API Jakarta Mail")]),_:1}),s("ul",null,[s("li",null,[e(n,{to:"#jakarta-mail-session"},{default:l(()=>[a("jakarta.mail.Session")]),_:1})]),s("li",null,[e(n,{to:"#jakarta-mail-message"},{default:l(()=>[a("jakarta.mail.Message")]),_:1})]),s("li",null,[e(n,{to:"#jakarta-mail-address"},{default:l(()=>[a("jakarta.mail.Address")]),_:1})]),s("li",null,[e(n,{to:"#jakarta-mail-authenticator"},{default:l(()=>[a("jakarta.mail.Authenticator")]),_:1})]),s("li",null,[e(n,{to:"#jakarta-mail-transport"},{default:l(()=>[a("jakarta.mail.Transport")]),_:1})])])]),s("li",null,[e(n,{to:"#_5-2-3-3-enviar-correos-electronicos-basicos-en-jakarta-mail"},{default:l(()=>[a("5.2.3 3 Enviar correos electrónicos básicos en Jakarta Mail")]),_:1}),s("ul",null,[s("li",null,[e(n,{to:"#preparacion-de-la-sesion"},{default:l(()=>[a("Preparación de la sesión")]),_:1})]),s("li",null,[e(n,{to:"#composicion-del-mensaje-texto-sin-formato"},{default:l(()=>[a("Composición del mensaje (texto sin formato)")]),_:1})]),s("li",null,[e(n,{to:"#enviar-mensaje"},{default:l(()=>[a("Enviar mensaje")]),_:1})])])]),s("li",null,[e(n,{to:"#_5-2-4-enviar-mensajes-html"},{default:l(()=>[a("5.2.4 Enviar mensajes HTML")]),_:1})]),s("li",null,[e(n,{to:"#_5-2-5-enviar-correo-electronico-con-archivos-adjuntos"},{default:l(()=>[a("5.2.5 Enviar correo electrónico con archivos adjuntos")]),_:1})]),s("li",null,[e(n,{to:"#enviar-correos-electronicos-html-con-imagenes"},{default:l(()=>[a("Enviar correos electrónicos HTML con imágenes")]),_:1}),s("ul",null,[s("li",null,[e(n,{to:"#insertando-imagenes-cid-content-id"},{default:l(()=>[a("Insertando imágenes CID (Content-ID)")]),_:1})]),s("li",null,[e(n,{to:"#insertando-imagenes-en-linea-base64"},{default:l(()=>[a("Insertando imágenes en línea (Base64)")]),_:1})]),s("li",null,[e(n,{to:"#linked-images"},{default:l(()=>[a("Linked images")]),_:1})])])])])]),b,s("blockquote",null,[s("p",null,[s("a",g,[a("JakartaMail API"),e(o)]),a(" es la especificación de la API de correo de Jakarta. La implementación de referencia de esta especificación se puede encontrar en el repositorio de GitHub "),s("a",D,[a("Jakarta Mail Specification"),e(o)]),a(".")])]),E,s("div",h,[f,q,j,M,s("ul",null,[s("li",null,[s("a",k,[a("Java Properties Files y como usarlos - Arquitectura Java"),e(o)])]),s("li",null,[s("a",_,[a("Getting started with Java properties - Baeldung"),e(o)])]),s("li",null,[s("a",P,[a("Properties class in Java - javaTpoint"),e(o)])])]),x,C]),I,s("div",w,[T,s("p",null,[s("a",S,[a("YopMail"),e(o)]),a(" es un servicio de correo electrónico temporal que se puede utilizar para recibir correos electrónicos de forma anónima. No se requiere registro para usar el servicio. Puede usar cualquier dirección de correo electrónico de su elección para recibir correos electrónicos. El servicio es gratuito y se puede utilizar para recibir correos electrónicos de forma anónima. El servicio es gratuito y se puede utilizar para recibir correos electrónicos de forma anónima.")])]),J,s("div",F,[L,z,H,s("p",null,[s("a",R,[a("Image to Base64 String Conversion - Baeldung"),e(o)])])]),O])}const K=A(m,[["render",U],["__file","mail.html.vue"]]);export{K as default};
