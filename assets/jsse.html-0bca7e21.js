import{_ as i}from"./VM_Options-afb4ac41.js";import{_ as A,r as e,o as y,c as d,d as n,a as s,w as l,b as a,f as E}from"./app-92b2a0d8.js";const B={},u=s("h1",{id:"_6-5-comunicaciones-seguras-en-java",tabindex:"-1"},"6.5 Comunicaciones seguras en Java",-1),D={class:"table-of-contents"},v=E(`<h2 id="_6-5-1-protocolo-ssl-secure-sockets-layer" tabindex="-1">6.5.1. Protocolo SSL (Secure Sockets Layer)</h2><p>SSL es el protocolo habitualmente usado para encriptar la comunicación cliente-servidor. Casi todo el tráfico de la red puede encriptarse con SSL: POP, IMAP, telnet, FTP, etc, pero es especialmente interesante para dotar de seguridad al protocolo HTTP, es decir como base del HTTPS.</p><p>La implementación de SSL es una extensión de los sockets que permite establecer un canal (stream) de comunicación. Dicha comunicación se inicia con un <strong>handshake</strong> durante el cual, el cliente y el servidor construyen una session-key (clave simétrica encriptada con par de claves asimétricas) compartida para verificar su identidad mutua.</p><h2 id="_6-5-2-jsse" tabindex="-1">6.5.2. JSSE</h2><p>JSSE (Java Secure Socket Extension) es un conjunto de paquetes que permiten el desarrollo de aplicaciones seguras en Internet. Proporciona un marco y una implementación para Java de los protocolos SSL y TSL e incluye funcionalidad de</p><ul><li>encriptación de datos</li><li>autenticación de servidores</li><li>integridad de mensajes</li><li>autenticación de clientes</li></ul><p>Con JSSE, los programadores pueden ofrecer intercambio seguro de datos entre un cliente y un servidor que ejecuta un protocolo de aplicación, tales como HTTP, Telnet o FTP, a través de TCP/IP.</p><p>Las clases de JSSE se encuentran en los paquetes javax.net y javax.net.ssl.</p><h3 id="sslsocket-y-sslserversocket" tabindex="-1">SSLSocket y SSLServerSocket</h3><p>Las clases SSLSocket y SSLServerSocket representan sockets seguros y son derivadas de las ya conocidas Socket y ServerSocket respectivamente.</p><p>JSSE tiene dos clases SSLServerSocketFactory y SSLSocketFactory para la creación de sockets seguros. No tienen constructor, se obtienen a través del método estático getDefault().</p><p>Para obtener un socket servidor seguro o <em>SSLServerSocket</em>:</p><div class="language-java" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">SSLServerSocketFactory</span><span style="color:#90A4AE;"> sfact </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLServerSocketFactory</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> SSLServerSocketFactory</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getDefault</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">SSLServerSocket</span><span style="color:#90A4AE;"> servidorSSL </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLServerSocket</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> sfact</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">createServerSocket</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">puerto</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre></div><p>El método <strong>createServerSocket(int puerto)</strong> devuelve un socket de servidor enlazado al puerto especificado.</p><p>Para crear un <em>SSLSocket</em>:</p><div class="language-java" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">SSLSocketFactory</span><span style="color:#90A4AE;"> sfact </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLSocketFactory</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> SSLSocketFactory</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getDefault</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">SSLSocket</span><span style="color:#90A4AE;"> Cliente </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLSocket</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> sfact</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">createSocket</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Host</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> puerto</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre></div><p>El método createSocket (String host, int puerto) crea un socket y lo conecta con el host y el puerto especificados.</p><h3 id="keytool-certificados-confianza-y-almacenes-de-claves" tabindex="-1">keytool: certificados, confianza y almacenes de claves</h3><p>Cuando dos socket SSL, uno cliente y otro servidor, intentan establecer conexión, tienen que &quot;presentarse&quot; el uno al otro y comprobar que el otro es de confianza. Si todo va bien y uno confía en el otro, la conexión se establece, en caso contrario, no se establece.</p><p>Para establecer esa confianza se debe crear un certificado en el servidor y añadirlo a los certificados de confianza del cliente.</p><ul><li>El servidor debe tener su propio certificado. Si no lo tenemos, se puede generar primero una pareja de claves con la herramienta <strong>keytool</strong>, que viene incluida en el JDK de Java. La herramienta guardará la pareja de claves en un almacén (el cual tiene su propia clave).</li><li>Después generaremos un certificado a partir de esa pareja.</li><li>El código del servidor necesitará indicar el fichero donde se almacenan las claves y la clave para acceder a ese almacén.</li><li>El cliente necesitará indicar que confía en el certificado del servidor. Dicho certificado del servidor puede estar guardado (por ejemplo) en el almacén de claves del cliente.</li></ul><div class="custom-container info"><p class="custom-container-title">Seguridad mutua</p><p>Aunque no suele hacerse también podría hacerse a la inversa y obligar al cliente a tener un certificado que el servidor pudiera importar, lo que aumentaría la seguridad.</p></div><p>Vamos a ver cómo realizar estas operaciones previas con la herramienta <strong>keytool</strong></p><p>Primero las acciones a realizar en el servidor</p><div class="language-bash" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;"># El servidor genera una pareja de claves que se almacena en un</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># fichero llamado &quot;clavesservidor&quot;. Dentro del fichero se indica</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># un alias para poder referirnos a esa clave fácilmente</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># keytool -genkey -keyalg RSA -alias servidor -keystore ClavesServidor -storepass 12345678</span></span>
<span class="line"><span style="color:#E2931D;">&quot;C:/Program Files/Java/jdk-11.0.11/bin/keytool.exe&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-genkey</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-keyalg</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">RSA</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-alias</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">servidor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-keystore</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">ClavesServidor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-storepass</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">12345678</span></span>
<span class="line"><span style="color:#E2931D;">What</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">your</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">first</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">and</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">last</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">name?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">Unknown</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">Vicente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Martinez</span></span>
<span class="line"><span style="color:#E2931D;">What</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">the</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">name</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">of</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">your</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">organizational</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">unit?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">Unknown</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">Dpto.</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Informatica</span></span>
<span class="line"><span style="color:#E2931D;">What</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">the</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">name</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">of</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">your</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">organization?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">Unknown</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">IES</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Doctor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Balmis</span></span>
<span class="line"><span style="color:#E2931D;">What</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">the</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">name</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">of</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">your</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">City</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">or</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Locality?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">Unknown</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">Alicante</span></span>
<span class="line"><span style="color:#E2931D;">What</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">the</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">name</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">of</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">your</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">State</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">or</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Province?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">Unknown</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">Alicante</span></span>
<span class="line"><span style="color:#E2931D;">What</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">the</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">two-letter</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">country</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">code</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">for</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">this</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">unit?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">Unknown</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">ES</span></span>
<span class="line"><span style="color:#E2931D;">Is</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">CN=Vicente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Martinez,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">OU=Dpto.</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Informatica,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">O=IES</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Doctor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Balmis,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">L=Alicante,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">ST=Alicante,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">C=ES</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">correct?</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">no</span><span style="color:#39ADB5;">]</span><span style="color:#6182B8;">:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># El servidor genera su &quot;certificado&quot;, es decir un fichero que</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># de alguna forma indica quien es él. El certificado se almacena</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># en un fichero llamado clavesservidor y a partir de él queremos</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># generar el certificado de un alias creado previamente con nombre servidor</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># keytool -exportcert -alias servidor -file servidor.cer -keystore ClavesServidor</span></span>
<span class="line"><span style="color:#E2931D;">&quot;C:/Program Files/Java/jdk-11.0.11/bin/keytool.exe&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-exportcert</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-alias</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">servidor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-file</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">servidor.cer</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-keystore</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">ClavesServidor</span></span>
<span class="line"><span style="color:#E2931D;">Enter</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">keystore</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">password:</span></span>
<span class="line"><span style="color:#E2931D;">Certificate</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">stored</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">in</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">file</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&lt;</span><span style="color:#91B859;">servidor.ce</span><span style="color:#90A4AE;">r</span><span style="color:#39ADB5;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>En la carpeta donde hemos ejecutado el comando keytool, se ha creado el almacén de claves en un fichero llamado <strong>ClavesServidor</strong> y el certificado exportado en el archivo <strong>servidor.cer</strong></p><p>y a continuación las que habría que realizar en el cliente para generar el almacén de confianza que, en nuestro caso contenga el mismo certificado que hemos exportado del servidor.</p><div class="language-bash" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;"># Se importa el certificado del servidor indicando que pertenece a</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># la lista de certificados confiables.</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># keytool -importcert -trustcacerts -alias servidor -file servidor.cer -keystore clavescliente  -storepass 87654321</span></span>
<span class="line"><span style="color:#E2931D;">&quot;C:/Program Files/Java/jdk-11.0.11/bin/keytool.exe&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-importcert</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-trustcacerts</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-alias</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">servidor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-file</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">servidor.cer</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-keystore</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">CertificadosConfianzaCliente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-storepass</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">87654321</span></span>
<span class="line"><span style="color:#E2931D;">Owner:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">CN=Vicente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Martinez,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">OU=Dpto.</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Informatica,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">O=IES</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Doctor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Balmis,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">L=Alicante,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">ST=Alicante,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">C=ES</span></span>
<span class="line"><span style="color:#E2931D;">Issuer:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">CN=Vicente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Martinez,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">OU=Dpto.</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Informatica,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">O=IES</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Doctor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Balmis,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">L=Alicante,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">ST=Alicante,</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">C=ES</span></span>
<span class="line"><span style="color:#E2931D;">Serial</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">number:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">4</span><span style="color:#91B859;">eb6f2a5</span></span>
<span class="line"><span style="color:#E2931D;">Valid</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">from:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Mon</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Jan</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">24</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">00</span><span style="color:#91B859;">:20:24</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">CET</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">2022</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">until:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Sun</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Apr</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">24</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">01</span><span style="color:#91B859;">:20:24</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">CEST</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">2022</span></span>
<span class="line"><span style="color:#E2931D;">Certificate</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">fingerprints:</span></span>
<span class="line"><span style="color:#90A4AE;">         </span><span style="color:#E2931D;">SHA1:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">DD:A2:75:4C:1C:BC:39:60:BE:B1:20:67:E1:5C:45:8C:48:B5:1F:54</span></span>
<span class="line"><span style="color:#90A4AE;">         </span><span style="color:#E2931D;">SHA256:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">82</span><span style="color:#91B859;">:C8:56:C2:DB:DE:8C:73:A9:21:C6:7D:DE:1F:39:4F:79:CC:5F:D5:10:BC:61:DA:E3:EE:E1:1D:21:EA:D2:33</span></span>
<span class="line"><span style="color:#E2931D;">Signature</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">algorithm</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">name:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">SHA256withRSA</span></span>
<span class="line"><span style="color:#E2931D;">Subject</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Public</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Key</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Algorithm:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">2048</span><span style="color:#91B859;">-bit</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">RSA</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">key</span></span>
<span class="line"><span style="color:#E2931D;">Version:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Extensions:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#1: ObjectId: 2.5.29.14 Criticality=false</span></span>
<span class="line"><span style="color:#E2931D;">SubjectKeyIdentifier</span><span style="color:#90A4AE;"> [</span></span>
<span class="line"><span style="color:#E2931D;">KeyIdentifier</span><span style="color:#90A4AE;"> [</span></span>
<span class="line"><span style="color:#E2931D;">0000:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">16</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">AE</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">35</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">7</span><span style="color:#91B859;">C</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">58</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">97</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">B1</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">95</span><span style="color:#90A4AE;">   </span><span style="color:#F76D47;">91</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">9</span><span style="color:#91B859;">B</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">FA</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">6</span><span style="color:#91B859;">C</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">2</span><span style="color:#91B859;">A</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">80</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">D2</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">90</span><span style="color:#90A4AE;">  </span><span style="color:#91B859;">..5.X......l</span><span style="color:#90A4AE;">*</span><span style="color:#91B859;">...</span></span>
<span class="line"><span style="color:#E2931D;">0010:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">1</span><span style="color:#91B859;">C</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">50</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">7</span><span style="color:#91B859;">F</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">C0</span><span style="color:#90A4AE;">                                        </span><span style="color:#91B859;">.P..</span></span>
<span class="line"><span style="color:#90A4AE;">]</span></span>
<span class="line"><span style="color:#90A4AE;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Trust</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">this</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">certificate?</span><span style="color:#90A4AE;"> [no]:  yes</span></span>
<span class="line"><span style="color:#E2931D;">Certificate</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">was</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">added</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">to</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">keystore</span></span>
<span class="line"></span></code></pre></div><p>En esta ocasión también se crea, en la carpeta donde se ha ejecutado el comando keytool, un fichero <strong>CertificadosConfianzaCliente</strong> con el/los certificados de confianza para el cliente.</p><h2 id="_6-5-3-servidor-y-cliente-ssl" tabindex="-1">6.5.3. Servidor y Cliente SSL</h2><p>En le siguiente ejemplo podemos observar como la inicialización del ServerSocket es diferente, pero a partir de que se llama al método accept y, en este caso se obtiene una instancia de tipo SSLSocket, el resto del código es igual que con la clase Socket.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U6S5_SSLServer</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">arg</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">SSLSocket</span><span style="color:#90A4AE;"> clienteConectado </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">DataInputStream</span><span style="color:#90A4AE;"> flujoEntrada </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">//FLUJO DE ENTRADA DE CLIENTE</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">DataOutputStream</span><span style="color:#90A4AE;"> flujoSalida </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">//FLUJO DE SALIDA AL CLIENTE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Las propiedades se pueden especificar mediante código, o bien mediante</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// argumentos de la JVM en la llamada a la aplicación</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// System.setProperty(&quot;javax.net.ssl.keyStore&quot;, System.getProperty(&quot;user.dir&quot;) + &quot;\\\\ClavesServidor&quot;);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;12345678&quot;);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Inicialización del ServerSocket SSL</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> puerto </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">6000</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">SSLServerSocketFactory</span><span style="color:#90A4AE;"> sfact </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLServerSocketFactory</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> SSLServerSocketFactory</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getDefault</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">SSLServerSocket</span><span style="color:#90A4AE;"> servidorSSL </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLServerSocket</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> sfact</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">createServerSocket</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">puerto</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;">&lt;</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">5</span><span style="color:#39ADB5;">;</span><span style="color:#90A4AE;"> i</span><span style="color:#39ADB5;">++)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Esperando al cliente </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> i</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// Se espera la conexión de un cliente con accept</span></span>
<span class="line"><span style="color:#90A4AE;">            clienteConectado </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLSocket</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> servidorSSL</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">accept</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// Trabajamos do DataInputStream y DataOutputStream para simplificar</span></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// el código del ejemplo</span></span>
<span class="line"><span style="color:#90A4AE;">            flujoEntrada </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">DataInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">clienteConectado</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getInputStream</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">            flujoSalida </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">DataOutputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">clienteConectado</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getOutputStream</span><span style="color:#39ADB5;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// El cliente envía un mensaje</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Recibiendo del CLIENTE: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> </span><span style="color:#90A4AE;">\\n\\t</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> flujoEntrada</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">readUTF</span><span style="color:#39ADB5;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">            </span><span style="color:#90A4AE;font-style:italic;">// El Servidor responde con un saludo</span></span>
<span class="line"><span style="color:#90A4AE;">            flujoSalida</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">writeUTF</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Saludos al cliente del servidor</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// CERRAR STREAMS Y SOCKETS</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoEntrada</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoSalida</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        clienteConectado</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        servidorSSL</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En el cliente el proceso es el mismo, tras la llamada al método createSocket, obtenemos una instancia de SSLSocket que utilizamos igual que si fuese un Socket.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">U6S5_SSLClient</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">arg</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">SSLSocket</span><span style="color:#90A4AE;"> clienteSSL </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">DataInputStream</span><span style="color:#90A4AE;"> flujoEntrada </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">//FLUJO DE ENTRADA DE CLIENTE</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">DataOutputStream</span><span style="color:#90A4AE;"> flujoSalida </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">null;</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">//FLUJO DE SALIDA AL CLIENTE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Las propiedades se pueden especificar mediante código, o bien mediante</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// argumentos de la JVM en la llamada a la aplicación</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// System.setProperty(&quot;javax.net.ssl.trustStore&quot;, System.getProperty(&quot;user.dir&quot;) + &quot;/CertificadosConfianzaCliente&quot;);</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">javax.net.ssl.trustStore</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">CertificadosConfianzaCliente</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">javax.net.ssl.trustStorePassword</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">87654321</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Inicialización del ServerSocket SSL</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> puerto </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">6000</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> host </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">localhost</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Programa Cliente iniciado....</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">SSLSocketFactory</span><span style="color:#90A4AE;"> sfact </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLSocketFactory</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> SSLSocketFactory</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getDefault</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        clienteSSL </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SSLSocket</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> sfact</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">createSocket</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">host</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> puerto</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Trabajamos do DataInputStream y DataOutputStream para simplificar</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// el código del ejemplo</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoSalida </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">DataOutputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">clienteSSL</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getOutputStream</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoEntrada </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">DataInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">clienteSSL</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getInputStream</span><span style="color:#39ADB5;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// Envío un saludo al servidor</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoSalida</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">writeUTF</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Saludos al SERVIDOR DESDE EL CLIENTE</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// El Servidor responde con un mensaje</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Recibiendo del SERVIDOR: </span><span style="color:#90A4AE;">\\n\\t</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> flujoEntrada</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">readUTF</span><span style="color:#39ADB5;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// CERRAR STREAMS Y SOCKETS</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoEntrada</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        flujoSalida</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        clienteSSL</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">mostrarInformacionSesionSSL</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">SSLSocket</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">cliente</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">SSLPeerUnverifiedException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">//------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">//Ejemplo de la múltiple información sobre la sesión SSL</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// que se puede obtener a partir </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">SSLSession</span><span style="color:#90A4AE;"> session </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">((</span><span style="color:#90A4AE;">SSLSocket</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> cliente</span><span style="color:#39ADB5;">).</span><span style="color:#6182B8;">getSession</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Host: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getPeerHost</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Cifrado: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getCipherSuite</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Protocolo: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProtocol</span><span style="color:#39ADB5;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">IDentificador:</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">BigInteger</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getId</span><span style="color:#39ADB5;">()));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Creación de la sesión: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getCreationTime</span><span style="color:#39ADB5;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">X509Certificate</span><span style="color:#90A4AE;"> certificate </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">X509Certificate</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getPeerCertificates</span><span style="color:#39ADB5;">()[</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">];</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Propietario: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> certificate</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getSubjectDN</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Algoritmo: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> certificate</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getSigAlgName</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Tipo: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> certificate</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getType</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Emisor: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> certificate</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getIssuerDN</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Número Serie: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> certificate</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getSerialNumber</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">//-----------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Si ejecutamos el cliente y el servidor directamente, obtendremos el siguiente error</p><div class="language-bash" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#E2931D;">Programa</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Cliente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">iniciado....</span></span>
<span class="line"><span style="color:#E2931D;">Exception</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">in</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">thread</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">main</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">javax.net.ssl.SSLHandshakeException:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">Received</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">fatal</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">alert:</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">handshake_failure</span></span>
<span class="line"></span></code></pre></div><p>Para ejecutar el programa servidor es necesario indicar el certificado que se utilizará.</p><p>Lo podemos indicar a la hora de ejecutar el programa, añadiendo a la línea de comandos</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">java</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-Djavax.net.ssl.keyStore=ClavesServidor</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-Djavax.net.ssl.keyStorePassword=12345678</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>y en el programa cliente es necesario indicar la ubicación de los certificados de confianza</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#E2931D;">java</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-Djavax.net.ssl.trustStore=CertificadosConfianzaCliente</span><span style="color:#90A4AE;"> </span><span style="color:#91B859;">-Djavax.net.ssl.trustStorePassword=87654321</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>o bien, en las opciones de ejecución del IDE</p><p><img src="`+i+'" alt="Netbeans: Opciones de la JVM"></p><div class="custom-container info"><p class="custom-container-title">Parámetros de JVM o código</p><p>En el código anterior hay unas líneas comentadas que especifican cómo podemos configurar el valor de las propiedades desde código mediante el uso del método System.setProperty(String propiedad, String valor).</p><p>En el programa servidor incluiríamos las siguientes líneas:</p><p>System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;ClavesServidor&quot;); System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;12345678&quot;);</p><p>Y en el programa cliente serían estas:</p><p>System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;CertificadosConfianzaCliente&quot;); System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;87654321&quot;);</p><p>Además del nombre, podemos indicar la ruta donde se encuentran los almacenes, recordando que NO ES RECOMENDABLE el uso de barras invertidas para indicar rutas.</p></div><p>Una vez hechos los cambios, bien en las opciones de la JVM o bien en el código de las aplicaciones, la salida que obtendremos será esta</p>',45),m=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki material-theme-lighter",style:{"background-color":"#FAFAFA"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Esperando"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"al"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"cliente"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#F76D47"}},"1")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Recibiendo"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"del"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"CLIENTE:"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#F76D47"}},"1"),s("span",{style:{color:"#90A4AE"}}," ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"	"),s("span",{style:{color:"#E2931D"}},"Saludos"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"al"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"SERVIDOR"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"DESDE"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"EL"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"CLIENTE")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Esperando"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"al"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"cliente"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#F76D47"}},"2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Recibiendo"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"del"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"CLIENTE:"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#F76D47"}},"2"),s("span",{style:{color:"#90A4AE"}}," ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"	"),s("span",{style:{color:"#E2931D"}},"Saludos"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"al"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"SERVIDOR"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"DESDE"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"EL"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"CLIENTE")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Esperando"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"al"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"cliente"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#F76D47"}},"3")]),a(`
`),s("span",{class:"line"})])])],-1),S=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki material-theme-lighter",style:{"background-color":"#FAFAFA"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Programa"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"Cliente"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"iniciado....")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E2931D"}},"Recibiendo"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"del"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"SERVIDOR:"),s("span",{style:{color:"#90A4AE"}}," ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#90A4AE"}},"	"),s("span",{style:{color:"#E2931D"}},"Saludos"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"al"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"cliente"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"del"),s("span",{style:{color:"#90A4AE"}}," "),s("span",{style:{color:"#91B859"}},"servidor")]),a(`
`),s("span",{class:"line"})])])],-1),b=s("div",{class:"custom-container warning"},[s("p",{class:"custom-container-title"},"Default trusted certificates"),s("p",null,"Whenever Java attempts to connect to another application over SSL (e.g.: HTTPS, IMAPS, LDAPS), it will only be able to connect to that application if it can trust it. The way trust is handled in the Java world is that you have a keystore (typically $JAVA_HOME/lib/security/cacerts), also known as the truststore. This contains a list of all known Certificate Authority (CA) certificates, and Java will only trust certificates that are signed by one of those CAs or public certificates that exist within that keystore."),s("p",null,"If -Djavax.net.ssl.trustStore has been configured, it will override the location of the default truststore, which will need to be checked.")],-1);function f(g,h){const t=e("DownloadPDF-component"),r=e("DocumentCover-component"),o=e("router-link"),p=e("CodeGroupItem"),c=e("CodeGroup");return y(),d("div",null,[n(t),n(r,{titulo:"6.5 Comunicaciones seguras en Java"}),u,s("nav",D,[s("ul",null,[s("li",null,[n(o,{to:"#_6-5-1-protocolo-ssl-secure-sockets-layer"},{default:l(()=>[a("6.5.1. Protocolo SSL (Secure Sockets Layer)")]),_:1})]),s("li",null,[n(o,{to:"#_6-5-2-jsse"},{default:l(()=>[a("6.5.2. JSSE")]),_:1}),s("ul",null,[s("li",null,[n(o,{to:"#sslsocket-y-sslserversocket"},{default:l(()=>[a("SSLSocket y SSLServerSocket")]),_:1})]),s("li",null,[n(o,{to:"#keytool-certificados-confianza-y-almacenes-de-claves"},{default:l(()=>[a("keytool: certificados, confianza y almacenes de claves")]),_:1})])])]),s("li",null,[n(o,{to:"#_6-5-3-servidor-y-cliente-ssl"},{default:l(()=>[a("6.5.3. Servidor y Cliente SSL")]),_:1})])])]),v,n(c,null,{default:l(()=>[n(p,{title:"Servidor",active:""},{default:l(()=>[m]),_:1}),n(p,{title:"Cliente"},{default:l(()=>[S]),_:1})]),_:1}),b])}const q=A(B,[["render",f],["__file","jsse.html.vue"]]);export{q as default};
