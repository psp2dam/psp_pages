import{_ as i}from"./FileZilla-Server-Interface-aa9c48b2.js";import{_ as A,r as e,o as y,c as d,d as n,a as s,w as o,b as a,f as p}from"./app-f513d7ce.js";const D={},E=s("h1",{id:"_5-2-cliente-ftp",tabindex:"-1"},"5.2 Cliente FTP",-1),u={class:"table-of-contents"},B=p('<h2 id="_5-2-1-apache-common-net-ftp" tabindex="-1">5.2.1 Apache Common Net FTP</h2><p>La librería Apache Commons Net™ implementa el lado de muchos protocolos básicos de Internet.</p><p>El propósito de la biblioteca es proporcionar acceso a protocolos fundamentales, no abstracciones de alto nivel. Por lo tanto, algunos de los diseños violan los principios de diseño orientado a objetos.</p><p>Nuestra filosofía es hacer que la funcionalidad global de un protocolo sea accesible (por ejemplo, TFTP envía archivo y recibe archivo) cuando sea posible, pero también proporcionar acceso a los protocolos fundamentales cuando corresponda para que el programador pueda construir sus propias implementaciones personalizadas (por ejemplo, las clases de paquetes TFTP y los métodos de envío y recepción de paquetes TFTP están expuestos).</p><div class="custom-container tip"><p class="custom-container-title">Librería Apache Commons NET™</p><p>Los protocolos soportados incluyen:</p><ul><li>FTP/FTPS</li><li>FTP over HTTP (experimental)</li><li>NNTP</li><li>SMTP(S)</li><li>POP3(S)</li><li>IMAP(S)</li><li>Telnet</li><li>TFTP</li><li>Finger</li><li>Whois</li><li>rexec/rcmd/rlogin</li><li>Time (rdate) and Daytime</li><li>Echo</li><li>Discard</li><li>NTP/SNTP</li></ul></div><p>En Java, de forma nativa, es posible realizar transferencias de archivos utilizando este protocolo, pero es extremadamente difícil hacerlo. La librería Apache Commons Net proporciona clases y utilidades para realizar cualquier operación sobre un servidor FTP o FTPS desde un cliente Java.</p><p>Esta librería se puede descargar desde la página web de apache.org a través del siguiente enlace: https://commons.apache.org/proper/commons-net/</p><h2 id="_5-2-2-servidor-ftp" tabindex="-1">5.2.2 Servidor FTP</h2><p>El servidor FTP es un programa que se ejecuta en un ordenador y permite que otros ordenadores se conecten a él y transfieran archivos utilizando el protocolo FTP.</p>',9),m={href:"https://filezilla-project.org/download.php?type=server",target:"_blank",rel:"noopener noreferrer"},v=p('<p>La instalación es muy sencilla, simplemente hay que seguir los pasos del asistente de instalación. Una vez instalado, tendremos que configurar el servidor, para ello tendremos que abrir el programa FileZilla Server Interface, que estará en el menú de inicio de Windows.</p><p><img src="'+i+`" alt="FileZilla Server Interface"></p><p>Una vez instalado el servidor, tendremos que configurarlo. Para ello, tendremos que abrir el programa FileZilla Server Interface, que estará en el menú de inicio de Windows y abrir el menú Server y seleccionar la opción &quot;Configure&quot;.</p><p>A continuación, en la sección Users, tendremos que crear un usuario, para ello tendremos que hacer clic en el botón &quot;Add&quot; y rellenar los campos con los datos del usuario que queremos crear. A continuación, cambiaremos el tipo de autenticación a &quot;Require a password to login&quot; e introduciremos la contraseña que queremos asignar al usuario.</p><p>A continuación, en la sección Mounting Points, tendremos que añadir un nuevo punto de montaje, para ello tendremos que hacer clic en el botón &quot;Add&quot; y rellenar los campos con los datos del punto de montaje que queremos crear. En el campo &quot;Native path&quot; tendremos que seleccionar el directorio que queremos compartir.</p><div class="custom-container tip"><p class="custom-container-title">Rutas Virtuales vs Rutas Nativas</p><p>Las rutas virtuales se utilizan para asignar un directorio en el servidor a un directorio virtual. Esto le permite crear una estructura de directorios virtuales que es diferente de la estructura de directorios real en el servidor. Por ejemplo, puede asignar el directorio &quot;C:\\Mis Documentos&quot; al directorio virtual &quot;/Documentos&quot;. Cuando un cliente se conecta al servidor y cambia al directorio &quot;/Documentos&quot;, el cliente estará realmente en el directorio &quot;C:\\Mis Documentos&quot; del servidor.</p></div><p>Una vez que hayamos creado el usuario y el punto de montaje, tendremos que hacer clic en el botón &quot;OK&quot; para guardar los cambios.</p><h2 id="_5-2-3-cliente-ftp" tabindex="-1">5.2.3 Cliente FTP</h2><p>Las clases y métodos principales del paquete org.apache.commons.net.ftp se muestran a continuación.</p><h3 id="_5-2-3-1-conectar-y-autenticar" tabindex="-1">5.2.3.1 Conectar y autenticar</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">ApacheFTPClient</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> server</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> port</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> user</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> password</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">FTPClient</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ApacheFTPClient</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">server</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">port</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">user</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">password</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">this.</span><span style="color:#90A4AE;">server </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> server</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">this.</span><span style="color:#90A4AE;">port </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> port</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">this.</span><span style="color:#90A4AE;">user </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> user</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">this.</span><span style="color:#90A4AE;">password </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> password</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">open</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FTPClient</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">server</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> port</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> reply </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getReplyCode</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(!</span><span style="color:#90A4AE;">FTPReply</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">isPositiveCompletion</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">reply</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">disconnect</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;font-style:italic;">throw</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">IOException</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Exception in connecting to FTP Server</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">login</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">user</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> password</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">disconnect</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">throws</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">IOException</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">ApacheFTPClient</span><span style="color:#90A4AE;"> client </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ApacheFTPClient</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">localhost</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">21</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">alumnodam</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">psp</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        client</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">open</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        client</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En el ejemplo anterior podemos ver cómo conectarnos a un servidor FTP utilizando la librería Apache Commons Net.</p><ol><li>Para ello, tendremos que crear una instancia de la clase <strong>FTPClient</strong> y llamar al método connect, pasando como parámetros el servidor y el puerto al que queremos conectarnos.</li><li>A continuación, tendremos que comprobar que la conexión se ha establecido correctamente, para ello tendremos que llamar al método <em>getReplyCode</em> y comprobar que el valor devuelto por este método es positivo.</li><li>Por último, tendremos que llamar al método login, pasando como parámetros el usuario y la contraseña con la que queremos iniciar sesión.</li></ol><h3 id="_5-2-3-2-cambio-de-directorios" tabindex="-1">5.2.3.2 Cambio de directorios</h3><p>En el protocolo FTP, el directorio local es el directorio en el ordenador del cliente y el directorio remoto es el directorio en el servidor. Tanto el directorio local como el remoto se llaman directorios de trabajo y ambos se pueden cambiar con el método <strong>changeWorkingDirectory</strong> para los archivos remotos y los métodos <strong>File</strong> para establecer el origen de los archivos locales.</p><p>Para mostrar el directorio de trabajo actual, podemos utilizar el método <strong>printWorkingDirectory</strong> y para mostrar el contenido del directorio de trabajo actual, podemos utilizar el método <strong>listFiles</strong> o el método <strong>listNames</strong>.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Obtener el directorio de trabajo remoto actual</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> workingDirectory </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">printWorkingDirectory</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Mostrar el contenido del directorio de trabajo remoto actual</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> name </span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">listNames</span><span style="color:#39ADB5;">())</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">name</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Cambiar el directorio de trabajo remoto actual</span></span>
<span class="line"><span style="color:#90A4AE;">    ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">changeWorkingDirectory</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileName</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para mostrar el directorio de trabajo local actual, tenemos que gestionarlo con la clase File y sus métodos. También podemos confiar en la clase System y sus métodos como estudiamos en la unidad de gestión de procesos.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Obtener el directorio de trabajo local actual</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> workingDirectory </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Mostrar el contenido del directorio de trabajo local actual</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">File</span><span style="color:#90A4AE;"> file </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">workingDirectory</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> name </span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> file</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">list</span><span style="color:#39ADB5;">())</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">name</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Cambiar el directorio de trabajo local actual</span></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user.dir</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-3-3-enviar-archivos-al-servidor" tabindex="-1">5.2.3.3 Enviar archivos al servidor</h3><p>En FTP los archivos se pueden cargar de dos formas diferentes:</p><p>Modo ASCII: el archivo se carga como texto, con las terminaciones de línea convertidas al estándar de red.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">sendTextFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws FileNotFoundException</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setFileType</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">FTP</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">ASCII_FILE_TYPE</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The getLocalWorkingDirectory() it&#39;s a custom method (not from the Apache Commons library) </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// that returns the path to the local file we want to upload</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">File</span><span style="color:#90A4AE;"> file </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#6182B8;">getLocalWorkingDirectory</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The file name in the server can be different from the local file name</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileRemote </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">InputStream</span><span style="color:#90A4AE;"> input </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FileInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> upload </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">storeFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileRemote</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> input</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        input</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> upload</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Modo binario: el archivo se carga tal cual, sin ninguna conversión.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">sendBinaryFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setFileType</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">FTP</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">BINARY_FILE_TYPE</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The getLocalWorkingDirectory() it&#39;s a custom method (not from the Apache Commons library) </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// that returns the path to the local file we want to upload</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">File</span><span style="color:#90A4AE;"> file </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#6182B8;">getLocalWorkingDirectory</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The file name in the server can be different from the local file name</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileRemote </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">InputStream</span><span style="color:#90A4AE;"> input </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FileInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">OutputStream</span><span style="color:#90A4AE;"> output </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">storeFileStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileRemote</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> bytesIn </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[</span><span style="color:#F76D47;">4096</span><span style="color:#39ADB5;">];</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> read </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">((</span><span style="color:#90A4AE;">read </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> input</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">read</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">bytesIn</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">!=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">-</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            output</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">write</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">bytesIn</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> read</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        input</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        output</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> upload </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">completePendingCommand</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> upload</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-3-4-descargar-archivos-del-servidor" tabindex="-1">5.2.3.4 Descargar archivos del servidor</h3><p>Como con la carga, los archivos se pueden descargar de dos formas diferentes:</p><p>Modo ASCII: el archivo se descarga como texto, con las terminaciones de línea convertidas al estándar local.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">getTextFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setFileType</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">FTP</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">ASCII_FILE_TYPE</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The getLocalWorkingDirectory() it&#39;s a custom method (not from the Apache Commons library) </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// that returns the path to the local file we want to download</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">File</span><span style="color:#90A4AE;"> file </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#6182B8;">getLocalWorkingDirectory</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The file name in the server can be different from the local file name</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileRemote </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">OutputStream</span><span style="color:#90A4AE;"> output </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FileOutputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> download </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">retrieveFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileRemote</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> output</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        output</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> download</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Modo binario: el archivo se descarga tal cual, sin ninguna conversión.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">getBinaryFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setFileType</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">FTP</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">BINARY_FILE_TYPE</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The getLocalWorkingDirectory() it&#39;s a custom method (not from the Apache Commons library) </span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// that returns the path to the local file we want to download</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">File</span><span style="color:#90A4AE;"> file </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">File</span><span style="color:#39ADB5;">(</span><span style="color:#6182B8;">getLocalWorkingDirectory</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">        </span><span style="color:#90A4AE;font-style:italic;">// The file name in the server can be different from the local file name</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileRemote </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">OutputStream</span><span style="color:#90A4AE;"> output </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FileOutputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">InputStream</span><span style="color:#90A4AE;"> input </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">retrieveFileStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileRemote</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> bytesIn </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[</span><span style="color:#F76D47;">4096</span><span style="color:#39ADB5;">];</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> read </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">((</span><span style="color:#90A4AE;">read </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> input</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">read</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">bytesIn</span><span style="color:#39ADB5;">))</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">!=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">-</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            output</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">write</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">bytesIn</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> read</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">boolean</span><span style="color:#90A4AE;"> download </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">completePendingCommand</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        input</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        output</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">close</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> download</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-3-5-otras-acciones" tabindex="-1">5.2.3.5 Otras acciones</h3><p>Otras acciones que se pueden realizar sobre el servidor FTP son:</p><p>Mostrar información de los archivos y propiedades de los archivos</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">showFileInfo</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">FTPFile</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> files </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">listFiles</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">for</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">FTPFile</span><span style="color:#90A4AE;"> file </span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> files</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getName</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getTimestamp</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">getTime</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">file</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getSize</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">f</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getType</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">==</span><span style="color:#90A4AE;"> FTPFile</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">FILE_TYPE</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                tipo </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">File</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">f</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getType</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">==</span><span style="color:#90A4AE;"> FTPFile</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">DIRECTORY_TYPE</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">                tipo </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Folder</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Añadir y eliminar directorios FTP remotos</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">addRemoteDirectory</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> directory</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">makeDirectory</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">directory</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">removeRemoteDirectory</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> directory</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">removeDirectory</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">directory</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Crear y eliminar archivos FTP remotos</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">addRemoteFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">storeFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileName</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">ByteArrayInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[</span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">]));</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">removeRemoteFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> fileName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">deleteFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Renombrar archivos y directorios FTP remotos</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">renameRemoteFile</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> oldName</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> newName</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> throws IOException </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        ftp</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">rename</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">oldName</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> newName</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,41);function b(f,h){const t=e("DownloadPDF-component"),r=e("DocumentCover-component"),l=e("router-link"),c=e("ExternalLinkIcon");return y(),d("div",null,[n(t),n(r,{titulo:"5.2 Cliente FTP"}),E,s("nav",u,[s("ul",null,[s("li",null,[n(l,{to:"#_5-2-1-apache-common-net-ftp"},{default:o(()=>[a("5.2.1 Apache Common Net FTP")]),_:1})]),s("li",null,[n(l,{to:"#_5-2-2-servidor-ftp"},{default:o(()=>[a("5.2.2 Servidor FTP")]),_:1})]),s("li",null,[n(l,{to:"#_5-2-3-cliente-ftp"},{default:o(()=>[a("5.2.3 Cliente FTP")]),_:1}),s("ul",null,[s("li",null,[n(l,{to:"#_5-2-3-1-conectar-y-autenticar"},{default:o(()=>[a("5.2.3.1 Conectar y autenticar")]),_:1})]),s("li",null,[n(l,{to:"#_5-2-3-2-cambio-de-directorios"},{default:o(()=>[a("5.2.3.2 Cambio de directorios")]),_:1})]),s("li",null,[n(l,{to:"#_5-2-3-3-enviar-archivos-al-servidor"},{default:o(()=>[a("5.2.3.3 Enviar archivos al servidor")]),_:1})]),s("li",null,[n(l,{to:"#_5-2-3-4-descargar-archivos-del-servidor"},{default:o(()=>[a("5.2.3.4 Descargar archivos del servidor")]),_:1})]),s("li",null,[n(l,{to:"#_5-2-3-5-otras-acciones"},{default:o(()=>[a("5.2.3.5 Otras acciones")]),_:1})])])])])]),B,s("p",null,[a("Para realizar las pruebas vamos a utilizar el servidor FTP FileZilla, que se puede descargar desde la "),s("a",m,[a("página web de Filezilla"),n(c)]),a(".")]),v])}const C=A(D,[["render",b],["__file","ftp.html.vue"]]);export{C as default};
